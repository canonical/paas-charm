{"uid":"c37788f05d578165","name":"test_with_database[postgresql/status-postgresql-k8s-14/edge-None-True]","fullName":"tests.integration.flask.test_database#test_with_database","historyId":"c17289e37937ca20f259b2852937c9bf","time":{"start":1772291886092,"stop":1772291983214,"duration":97122},"description":"\n    arrange: build and deploy the flask charm.\n    act: deploy the database and relate it to the charm.\n    assert: requesting the charm should return a correct response\n    ","descriptionHtml":"<pre><code>arrange: build and deploy the flask charm.\nact: deploy the database and relate it to the charm.\nassert: requesting the charm should return a correct response\n</code></pre>\n","status":"passed","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":1,"retriesStatusChange":true,"beforeStages":[{"name":"tmp_path_factory","time":{"start":1772291843452,"stop":1772291843452,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"juju","time":{"start":1772291843452,"stop":1772291843452,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"pytestconfig","time":{"start":1772291843452,"stop":1772291843452,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"flask_app","time":{"start":1772291843452,"stop":1772291886090,"duration":42638},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"cwd","time":{"start":1772291886091,"stop":1772291886091,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"session_with_retry","time":{"start":1772291886091,"stop":1772291886091,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"description":"\n    arrange: build and deploy the flask charm.\n    act: deploy the database and relate it to the charm.\n    assert: requesting the charm should return a correct response\n    ","status":"passed","steps":[],"attachments":[{"uid":"478232ac3dda96a5","name":"log","source":"478232ac3dda96a5.txt","type":"text/plain","size":34894}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"flask_app::0","time":{"start":1772291983216,"stop":1772291983216,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"session_with_retry::0","time":{"start":1772291983216,"stop":1772291983216,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"parentSuite","value":"tests.integration.flask"},{"name":"suite","value":"test_database"},{"name":"host","value":"runnervmnay03"},{"name":"thread","value":"34423-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.integration.flask.test_database"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"db_channel","value":"'14/edge'"},{"name":"db_name","value":"'postgresql-k8s'"},{"name":"endpoint","value":"'postgresql/status'"},{"name":"revision","value":"None"},{"name":"trust","value":"True"}],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[{"uid":"75683dd556098a53","status":"unknown","time":{}}],"categories":[],"history":{"statistic":{"failed":0,"broken":3,"skipped":0,"passed":28,"unknown":4,"total":35},"items":[{"uid":"d5fdcdf358177a46","reportUrl":"../1492//#testresult/d5fdcdf358177a46","status":"passed","time":{"start":1771687158324,"stop":1771687270328,"duration":112004}},{"uid":"b992d4d77e8326b4","reportUrl":"../1482//#testresult/b992d4d77e8326b4","status":"unknown","time":{}},{"uid":"92b412695f5889c2","reportUrl":"../1399//#testresult/92b412695f5889c2","status":"broken","statusDetails":"TimeoutError: wait timed out after 180.0s\nStatus(\n  model=ModelStatus(\n    name='testing',\n    type='caas',\n    controller='github-pr-fcc63-microk8s',\n    cloud='microk8s',\n    version='3.6.14',\n    region='localhost',\n    model_status=StatusInfo(current='available', since='07 Feb 2026 15:12:21Z'),\n  ),\n  machines={},\n  apps={\n    'flask-k8s': AppStatus(\n      charm='local:flask-k8s-0',\n      charm_origin='local',\n      charm_name='flask-k8s',\n      charm_rev=0,\n      exposed=False,\n      base=FormattedBase(name='ubuntu', channel='22.04'),\n      scale=1,\n      provider_id='e104b6b4-dcde-461a-b1ff-73537fe94f2e',\n      address='10.152.183.139',\n      app_status=StatusInfo(current='active', since='07 Feb 2026 15:19:39Z'),\n      relations={\n        'secret-storage': [\n          AppStatusRelation(related_app='flask-k8s', interface='secret-storage', scope='global'),\n        ],\n      },\n      units={\n        'flask-k8s/0': UnitStatus(\n          workload_status=StatusInfo(current='active', since='07 Feb 2026 15:19:39Z'),\n          juju_status=StatusInfo(current='idle', since='07 Feb 2026 15:19:39Z', version='3.6.14'),\n          leader=True,\n          address='10.1.76.140',\n          provider_id='flask-k8s-0',\n        ),\n      },\n      endpoint_bindings={\n        '': 'alpha',\n        'grafana-dashboard': 'alpha',\n        'http-proxy': 'alpha',\n        'ingress': 'alpha',\n        'logging': 'alpha',\n        'metrics-endpoint': 'alpha',\n        'mongodb': 'alpha',\n        'mysql': 'alpha',\n        'oidc': 'alpha',\n        'openfga': 'alpha',\n        'postgresql': 'alpha',\n        'rabbitmq': 'alpha',\n        'redis': 'alpha',\n        's3': 'alpha',\n        'saml': 'alpha',\n        'secret-storage': 'alpha',\n        'smtp': 'alpha',\n        'tracing': 'alpha',\n      },\n    ),\n    'postgresql-k8s': AppStatus(\n      charm='postgresql-k8s',\n      charm_origin='charmhub',\n      charm_name='postgresql-k8s',\n      charm_rev=736,\n      exposed=False,\n      base=FormattedBase(name='ubuntu', channel='22.04'),\n      charm_channel='14/edge',\n      scale=1,\n      provider_id='1b64b5b2-f373-46fb-b8d0-aa1aa3a4829c',\n      address='10.152.183.74',\n      app_status=StatusInfo(current='waiting', message='awaiting for cluster to start', since='07 Feb 2026 15:21:17Z'),\n      relations={\n        'database-peers': [\n          AppStatusRelation(related_app='postgresql-k8s', interface='postgresql_peers', scope='global'),\n        ],\n        'restart': [\n          AppStatusRelation(related_app='postgresql-k8s', interface='rolling_op', scope='global'),\n        ],\n        'upgrade': [\n          AppStatusRelation(related_app='postgresql-k8s', interface='upgrade', scope='global'),\n        ],\n      },\n      units={\n        'postgresql-k8s/0': UnitStatus(\n          workload_status=StatusInfo(current='waiting', message='awaiting for cluster to start', since='07 Feb 2026 15:21:17Z'),\n          juju_status=StatusInfo(current='idle', since='07 Feb 2026 15:21:40Z', version='3.6.14'),\n          leader=True,\n          address='10.1.76.142',\n          provider_id='postgresql-k8s-0',\n        ),\n      },\n      version='14.20',\n      endpoint_bindings={\n        '': 'alpha',\n        'certificates': 'alpha',\n        'database': 'alpha',\n        'database-peers': 'alpha',\n        'db': 'alpha',\n        'db-admin': 'alpha',\n        'grafana-dashboard': 'alpha',\n        'ldap': 'alpha',\n        'logging': 'alpha',\n        'metrics-endpoint': 'alpha',\n        'receive-ca-cert': 'alpha',\n        'replication': 'alpha',\n        'replication-offer': 'alpha',\n        'restart': 'alpha',\n        's3-parameters': 'alpha',\n        'tracing': 'alpha',\n        'upgrade': 'alpha',\n      },\n    ),\n  },\n  storage=CombinedStorage(\n    storage={\n      'pgdata/0': StorageInfo(\n        kind='filesystem',\n        status=EntityStatus(current='attached', message='Successfully provisioned volume pvc-8f5878f1-0c31-4a87-86c8-9dade4cf040a', since='07 Feb 2026 15:19:56Z'),\n        persistent=False,\n        life='alive',\n        attachments=StorageAttachments(\n          units={\n            'postgresql-k8s/0': UnitStorageAttachment(life='alive'),\n          },\n        ),\n      ),\n    },\n    filesystems={\n      '0': FilesystemInfo(\n        size=1024,\n        provider_id='8f5878f1-0c31-4a87-86c8-9dade4cf040a',\n        volume='0',\n        storage='pgdata/0',\n        attachments=FilesystemAttachments(\n          containers={\n            'postgresql-k8s/0': FilesystemAttachment(mount_point='/var/lib/postgresql/data', read_only=False, life='alive'),\n          },\n          units={\n            'postgresql-k8s/0': UnitStorageAttachment(life='alive'),\n          },\n        ),\n        pool='kubernetes',\n        life='alive',\n        status=EntityStatus(current='attached', message='Successfully provisioned volume pvc-8f5878f1-0c31-4a87-86c8-9dade4cf040a', since='07 Feb 2026 15:19:56Z'),\n      ),\n    },\n    volumes={\n      '0': VolumeInfo(\n        size=1024,\n        persistent=True,\n        provider_id='pvc-8f5878f1-0c31-4a87-86c8-9dade4cf040a',\n        storage='pgdata/0',\n        attachments=VolumeAttachments(\n          containers={\n            'postgresql-k8s/0': VolumeAttachment(read_only=False, life='alive'),\n          },\n          units={\n            'postgresql-k8s/0': UnitStorageAttachment(life='alive'),\n          },\n        ),\n        pool='kubernetes',\n        life='alive',\n        status=EntityStatus(current='attached', since='07 Feb 2026 15:19:56Z'),\n      ),\n    },\n  ),\n  controller=ControllerStatus(timestamp='15:22:45Z'),\n)","time":{"start":1770477582420,"stop":1770477766098,"duration":183678}},{"uid":"5509259a9a69cac9","reportUrl":"../1327//#testresult/5509259a9a69cac9","status":"passed","time":{"start":1769872734385,"stop":1769872861559,"duration":127174}},{"uid":"99a4eff90e537147","reportUrl":"../1268//#testresult/99a4eff90e537147","status":"passed","time":{"start":1769267869687,"stop":1769267992970,"duration":123283}},{"uid":"449fb3d045a77c25","reportUrl":"../1267//#testresult/449fb3d045a77c25","status":"passed","time":{"start":1768663112730,"stop":1768663242243,"duration":129513}},{"uid":"54d5f9bec06dd29a","reportUrl":"../1248//#testresult/54d5f9bec06dd29a","status":"unknown","time":{}},{"uid":"a17076dfdae8240c","reportUrl":"../1246//#testresult/a17076dfdae8240c","status":"unknown","time":{}},{"uid":"b7f5ce576c622d15","reportUrl":"../1245//#testresult/b7f5ce576c622d15","status":"passed","time":{"start":1766848689795,"stop":1766849071929,"duration":382134}},{"uid":"3226ca957903464f","reportUrl":"../1244//#testresult/3226ca957903464f","status":"unknown","time":{}},{"uid":"f45e93ade29171c8","reportUrl":"../1226//#testresult/f45e93ade29171c8","status":"passed","time":{"start":1765639066655,"stop":1765639192687,"duration":126032}},{"uid":"839924b134357e29","reportUrl":"../1201//#testresult/839924b134357e29","status":"passed","time":{"start":1765034268294,"stop":1765034397506,"duration":129212}},{"uid":"57d05f41560f687f","reportUrl":"../1197//#testresult/57d05f41560f687f","status":"passed","time":{"start":1764429815801,"stop":1764430212600,"duration":396799}},{"uid":"aed5db119a89a13d","reportUrl":"../1173//#testresult/aed5db119a89a13d","status":"passed","time":{"start":1763971543591,"stop":1763971990136,"duration":446545}},{"uid":"87f1ba64ca159a8e","reportUrl":"../1169//#testresult/87f1ba64ca159a8e","status":"passed","time":{"start":1763964194766,"stop":1763964318814,"duration":124048}},{"uid":"9332bed7181bc7d2","reportUrl":"../1159//#testresult/9332bed7181bc7d2","status":"passed","time":{"start":1763706693911,"stop":1763707081410,"duration":387499}},{"uid":"36a87ce10242143a","reportUrl":"../1158//#testresult/36a87ce10242143a","status":"passed","time":{"start":1763557190032,"stop":1763557302695,"duration":112663}},{"uid":"84d6fdbdecc85e1d","reportUrl":"../1156//#testresult/84d6fdbdecc85e1d","status":"passed","time":{"start":1763548703987,"stop":1763548829834,"duration":125847}},{"uid":"53f66fb01fd67061","reportUrl":"../1155//#testresult/53f66fb01fd67061","status":"passed","time":{"start":1763547211563,"stop":1763547604771,"duration":393208}},{"uid":"392b6b0971942b4a","reportUrl":"../1154//#testresult/392b6b0971942b4a","status":"passed","time":{"start":1763546458731,"stop":1763546586684,"duration":127953}}]},"tags":[]},"source":"c37788f05d578165.json","parameterValues":["'14/edge'","'postgresql-k8s'","'postgresql/status'","None","True"]}