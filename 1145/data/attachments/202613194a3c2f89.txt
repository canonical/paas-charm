11:30:24 [32mINFO[0m cli: juju status --model testing --format json
11:30:25 [32mINFO[0m cli: juju bootstrap lxd localhost
11:32:02 [32mINFO[0m cli: juju switch github-pr-5351f-microk8s:testing
11:32:02 [32mINFO[0m cli: juju status --model testing --format json
11:32:03 [32mINFO[0m cli: juju status --model testing --format json
11:32:03 [32mINFO[0m cli: juju switch localhost:
11:32:03 [32mINFO[0m cli: juju add-model --no-switch testing
11:32:03 [32mINFO[0m cli: juju switch github-pr-5351f-microk8s:testing
11:32:04 [32mINFO[0m cli: juju status --model testing --format json
11:32:04 [32mINFO[0m cli: juju switch localhost:testing
11:32:04 [32mINFO[0m cli: juju status --model testing --format json
11:32:04 [32mINFO[0m cli: juju deploy --model testing squid-forward-proxy --channel edge --config hostname=proxy.example.com
11:32:06 [32mINFO[0m cli: juju offer squid-forward-proxy:http-proxy
11:32:07 [32mINFO[0m wait: status changed:
+ .model.name = 'testing'
+ .model.type = 'iaas'
+ .model.controller = 'localhost'
+ .model.cloud = 'localhost'
+ .model.version = '3.6.11'
+ .model.region = 'localhost'
+ .model.model_status.current = 'available'
+ .machines['0'].juju_status.current = 'pending'
+ .machines['0'].instance_id = 'pending'
+ .machines['0'].machine_status.current = 'pending'
+ .machines['0'].modification_status.current = 'idle'
+ .machines['0'].base.name = 'ubuntu'
+ .machines['0'].base.channel = '24.04'
+ .machines['0'].constraints = 'arch=amd64'
+ .apps['squid-forward-proxy'].charm = 'squid-forward-proxy'
+ .apps['squid-forward-proxy'].charm_origin = 'charmhub'
+ .apps['squid-forward-proxy'].charm_name = 'squid-forward-proxy'
+ .apps['squid-forward-proxy'].charm_rev = 31
+ .apps['squid-forward-proxy'].exposed = False
+ .apps['squid-forward-proxy'].base.name = 'ubuntu'
+ .apps['squid-forward-proxy'].base.channel = '24.04'
+ .apps['squid-forward-proxy'].charm_channel = 'latest/edge'
+ .apps['squid-forward-proxy'].app_status.current = 'waiting'
+ .apps['squid-forward-proxy'].app_status.message = 'waiting for machine'
+ .apps['squid-forward-proxy'].relations['squid-peer'][0].related_app = 'squid-forward-proxy'
+ .apps['squid-forward-proxy'].relations['squid-peer'][0].interface = 'squid_peer'
+ .apps['squid-forward-proxy'].relations['squid-peer'][0].scope = 'global'
+ .apps['squid-forward-proxy'].units['squid-forward-proxy/0'].workload_status.current = 'waiting'
+ .apps['squid-forward-proxy'].units['squid-forward-proxy/0'].workload_status.message = 'waiting for machine'
+ .apps['squid-forward-proxy'].units['squid-forward-proxy/0'].juju_status.current = 'allocating'
+ .apps['squid-forward-proxy'].units['squid-forward-proxy/0'].machine = '0'
+ .apps['squid-forward-proxy'].endpoint_bindings[''] = 'alpha'
+ .apps['squid-forward-proxy'].endpoint_bindings['cos-agent'] = 'alpha'
+ .apps['squid-forward-proxy'].endpoint_bindings['http-proxy'] = 'alpha'
+ .apps['squid-forward-proxy'].endpoint_bindings['squid-peer'] = 'alpha'
+ .offers['squid-forward-proxy'].app = 'squid-forward-proxy'
+ .offers['squid-forward-proxy'].endpoints['http-proxy'].interface = 'http_proxy'
+ .offers['squid-forward-proxy'].endpoints['http-proxy'].role = 'provider'
+ .offers['squid-forward-proxy'].charm = 'ch:amd64/squid-forward-proxy-31'
11:32:17 [32mINFO[0m wait: status changed:
- .machines['0'].machine_status.current = 'pending'
+ .machines['0'].machine_status.current = 'allocating'
+ .machines['0'].machine_status.message = 'Creating container'
11:32:27 [32mINFO[0m wait: status changed:
- .machines['0'].instance_id = 'pending'
- .machines['0'].machine_status.current = 'allocating'
- .machines['0'].machine_status.message = 'Creating container'
- .machines['0'].modification_status.current = 'idle'
+ .machines['0'].dns_name = '10.163.43.11'
+ .machines['0'].ip_addresses[0] = '10.163.43.11'
+ .machines['0'].instance_id = 'juju-0c3d3e-0'
+ .machines['0'].machine_status.current = 'running'
+ .machines['0'].machine_status.message = 'Running'
+ .machines['0'].modification_status.current = 'applied'
+ .machines['0'].hardware = 'arch=amd64 cores=0 mem=0M availability-zone=runnervmfg25i virt-type=container'
+ .apps['squid-forward-proxy'].units['squid-forward-proxy/0'].public_address = '10.163.43.11'
11:32:58 [32mINFO[0m wait: status changed:
- .machines['0'].juju_status.current = 'pending'
+ .machines['0'].juju_status.current = 'started'
+ .machines['0'].juju_status.version = '3.6.11'
+ .machines['0'].hostname = 'juju-0c3d3e-0'
+ .machines['0'].network_interfaces['eth0'].ip_addresses[0] = '10.163.43.11'
+ .machines['0'].network_interfaces['eth0'].mac_address = '00:16:3e:87:03:2e'
+ .machines['0'].network_interfaces['eth0'].is_up = True
+ .machines['0'].network_interfaces['eth0'].gateway = '10.163.43.1'
+ .machines['0'].network_interfaces['eth0'].space = 'alpha'
- .apps['squid-forward-proxy'].app_status.current = 'waiting'
- .apps['squid-forward-proxy'].app_status.message = 'waiting for machine'
+ .apps['squid-forward-proxy'].app_status.current = 'maintenance'
+ .apps['squid-forward-proxy'].app_status.message = 'installing squid'
- .apps['squid-forward-proxy'].units['squid-forward-proxy/0'].workload_status.current = 'waiting'
- .apps['squid-forward-proxy'].units['squid-forward-proxy/0'].workload_status.message = 'waiting for machine'
- .apps['squid-forward-proxy'].units['squid-forward-proxy/0'].juju_status.current = 'allocating'
+ .apps['squid-forward-proxy'].units['squid-forward-proxy/0'].workload_status.current = 'maintenance'
+ .apps['squid-forward-proxy'].units['squid-forward-proxy/0'].workload_status.message = 'installing squid'
+ .apps['squid-forward-proxy'].units['squid-forward-proxy/0'].juju_status.current = 'executing'
+ .apps['squid-forward-proxy'].units['squid-forward-proxy/0'].juju_status.message = 'running install hook'
+ .apps['squid-forward-proxy'].units['squid-forward-proxy/0'].juju_status.version = '3.6.11'
+ .apps['squid-forward-proxy'].units['squid-forward-proxy/0'].leader = True
11:33:08 [32mINFO[0m wait: status changed:
- .apps['squid-forward-proxy'].app_status.current = 'maintenance'
- .apps['squid-forward-proxy'].app_status.message = 'installing squid'
+ .apps['squid-forward-proxy'].app_status.current = 'active'
- .apps['squid-forward-proxy'].units['squid-forward-proxy/0'].workload_status.current = 'maintenance'
- .apps['squid-forward-proxy'].units['squid-forward-proxy/0'].workload_status.message = 'installing squid'
+ .apps['squid-forward-proxy'].units['squid-forward-proxy/0'].workload_status.current = 'active'
- .apps['squid-forward-proxy'].units['squid-forward-proxy/0'].juju_status.message = 'running install hook'
+ .apps['squid-forward-proxy'].units['squid-forward-proxy/0'].juju_status.message = 'running squid-peer-relation-created hook'
11:33:18 [32mINFO[0m wait: status changed:
+ .apps['squid-forward-proxy'].app_status.message = 'ready: 0'
- .apps['squid-forward-proxy'].units['squid-forward-proxy/0'].juju_status.current = 'executing'
- .apps['squid-forward-proxy'].units['squid-forward-proxy/0'].juju_status.message = 'running squid-peer-relation-created hook'
+ .apps['squid-forward-proxy'].units['squid-forward-proxy/0'].workload_status.message = 'ready: 0'
+ .apps['squid-forward-proxy'].units['squid-forward-proxy/0'].juju_status.current = 'idle'
+ .apps['squid-forward-proxy'].units['squid-forward-proxy/0'].open_ports[0] = '3128/tcp'
11:33:29 [32mINFO[0m cli: juju switch github-pr-5351f-microk8s:testing
11:33:29 [32mINFO[0m cli: juju consume localhost:admin/testing.squid-forward-proxy
11:33:29 [32mINFO[0m cli: juju status --model testing --format json
11:33:29 [32mINFO[0m cli: juju deploy --model testing http-proxy-configurator --channel latest/edge --config http-proxy-auth=none --config http-proxy-domains=www.example.com
11:33:31 [32mINFO[0m cli: juju integrate --model testing http-proxy-configurator squid-forward-proxy
11:33:32 [32mINFO[0m wait: status changed:
+ .model.name = 'testing'
+ .model.type = 'caas'
+ .model.controller = 'github-pr-5351f-microk8s'
+ .model.cloud = 'microk8s'
+ .model.version = '3.6.11'
+ .model.region = 'localhost'
+ .model.model_status.current = 'available'
+ .apps['http-proxy-configurator'].charm = 'http-proxy-configurator'
+ .apps['http-proxy-configurator'].charm_origin = 'charmhub'
+ .apps['http-proxy-configurator'].charm_name = 'http-proxy-configurator'
+ .apps['http-proxy-configurator'].charm_rev = 6
+ .apps['http-proxy-configurator'].exposed = False
+ .apps['http-proxy-configurator'].base.name = 'ubuntu'
+ .apps['http-proxy-configurator'].base.channel = '24.04'
+ .apps['http-proxy-configurator'].charm_channel = 'latest/edge'
+ .apps['http-proxy-configurator'].scale = 1
+ .apps['http-proxy-configurator'].app_status.current = 'waiting'
+ .apps['http-proxy-configurator'].app_status.message = 'installing agent'
+ .apps['http-proxy-configurator'].relations['http-proxy'][0].related_app = 'squid-forward-proxy'
+ .apps['http-proxy-configurator'].relations['http-proxy'][0].interface = 'http_proxy'
+ .apps['http-proxy-configurator'].units['http-proxy-configurator/0'].workload_status.current = 'waiting'
+ .apps['http-proxy-configurator'].units['http-proxy-configurator/0'].workload_status.message = 'installing agent'
+ .apps['http-proxy-configurator'].units['http-proxy-configurator/0'].juju_status.current = 'allocating'
+ .apps['http-proxy-configurator'].endpoint_bindings[''] = 'alpha'
+ .apps['http-proxy-configurator'].endpoint_bindings['delegate-http-proxy'] = 'alpha'
+ .apps['http-proxy-configurator'].endpoint_bindings['http-proxy'] = 'alpha'
+ .app_endpoints['squid-forward-proxy'].url = 'localhost:admin/testing.squid-forward-proxy'
+ .app_endpoints['squid-forward-proxy'].endpoints['http-proxy'].interface = 'http_proxy'
+ .app_endpoints['squid-forward-proxy'].endpoints['http-proxy'].role = 'provider'
+ .app_endpoints['squid-forward-proxy'].app_status.current = 'active'
+ .app_endpoints['squid-forward-proxy'].app_status.message = 'ready: 0'
+ .app_endpoints['squid-forward-proxy'].relations['http-proxy'][0] = 'http-proxy-configurator'
11:33:42 [32mINFO[0m wait: status changed:
- .apps['http-proxy-configurator'].app_status.current = 'waiting'
- .apps['http-proxy-configurator'].app_status.message = 'installing agent'
+ .apps['http-proxy-configurator'].provider_id = '60aa9126-41a3-4e7e-8b98-ba502fee72e6'
+ .apps['http-proxy-configurator'].address = '10.152.183.57'
+ .apps['http-proxy-configurator'].app_status.current = 'active'
- .apps['http-proxy-configurator'].units['http-proxy-configurator/0'].workload_status.current = 'waiting'
- .apps['http-proxy-configurator'].units['http-proxy-configurator/0'].workload_status.message = 'installing agent'
- .apps['http-proxy-configurator'].units['http-proxy-configurator/0'].juju_status.current = 'allocating'
+ .apps['http-proxy-configurator'].units['http-proxy-configurator/0'].workload_status.current = 'active'
+ .apps['http-proxy-configurator'].units['http-proxy-configurator/0'].juju_status.current = 'idle'
+ .apps['http-proxy-configurator'].units['http-proxy-configurator/0'].juju_status.version = '3.6.11'
+ .apps['http-proxy-configurator'].units['http-proxy-configurator/0'].leader = True
+ .apps['http-proxy-configurator'].units['http-proxy-configurator/0'].address = '10.1.50.138'
+ .apps['http-proxy-configurator'].units['http-proxy-configurator/0'].provider_id = 'http-proxy-configurator-0'
11:33:52 [32mINFO[0m wait: status changed:
- .app_endpoints['squid-forward-proxy'].app_status.message = 'ready: 0'
+ .app_endpoints['squid-forward-proxy'].app_status.message = 'ready: 1'
11:34:03 [32mINFO[0m cli: juju deploy --model testing /home/runner/work/paas-charm/paas-charm/flask-k8s_ubuntu-22.04-amd64.charm --resource flask-app-image=ghcr.io/canonical/test-flask:ac29e1faf47d5a93c86a5a026bb1906edc2b2fff-_0.1_amd64
11:34:06 [32mINFO[0m wait: status changed:
+ .model.name = 'testing'
+ .model.type = 'caas'
+ .model.controller = 'github-pr-5351f-microk8s'
+ .model.cloud = 'microk8s'
+ .model.version = '3.6.11'
+ .model.region = 'localhost'
+ .model.model_status.current = 'available'
+ .apps['flask-k8s'].charm = 'local:flask-k8s-0'
+ .apps['flask-k8s'].charm_origin = 'local'
+ .apps['flask-k8s'].charm_name = 'flask-k8s'
+ .apps['flask-k8s'].charm_rev = 0
+ .apps['flask-k8s'].exposed = False
+ .apps['flask-k8s'].base.name = 'ubuntu'
+ .apps['flask-k8s'].base.channel = '22.04'
+ .apps['flask-k8s'].scale = 1
+ .apps['flask-k8s'].app_status.current = 'waiting'
+ .apps['flask-k8s'].app_status.message = 'installing agent'
+ .apps['flask-k8s'].relations['secret-storage'][0].related_app = 'flask-k8s'
+ .apps['flask-k8s'].relations['secret-storage'][0].interface = 'secret-storage'
+ .apps['flask-k8s'].relations['secret-storage'][0].scope = 'global'
+ .apps['flask-k8s'].units['flask-k8s/0'].workload_status.current = 'waiting'
+ .apps['flask-k8s'].units['flask-k8s/0'].workload_status.message = 'installing agent'
+ .apps['flask-k8s'].units['flask-k8s/0'].juju_status.current = 'allocating'
+ .apps['flask-k8s'].endpoint_bindings[''] = 'alpha'
+ .apps['flask-k8s'].endpoint_bindings['grafana-dashboard'] = 'alpha'
+ .apps['flask-k8s'].endpoint_bindings['http-proxy'] = 'alpha'
+ .apps['flask-k8s'].endpoint_bindings['ingress'] = 'alpha'
+ .apps['flask-k8s'].endpoint_bindings['logging'] = 'alpha'
+ .apps['flask-k8s'].endpoint_bindings['metrics-endpoint'] = 'alpha'
+ .apps['flask-k8s'].endpoint_bindings['mongodb'] = 'alpha'
+ .apps['flask-k8s'].endpoint_bindings['mysql'] = 'alpha'
+ .apps['flask-k8s'].endpoint_bindings['oidc'] = 'alpha'
+ .apps['flask-k8s'].endpoint_bindings['openfga'] = 'alpha'
+ .apps['flask-k8s'].endpoint_bindings['postgresql'] = 'alpha'
+ .apps['flask-k8s'].endpoint_bindings['rabbitmq'] = 'alpha'
+ .apps['flask-k8s'].endpoint_bindings['redis'] = 'alpha'
+ .apps['flask-k8s'].endpoint_bindings['s3'] = 'alpha'
+ .apps['flask-k8s'].endpoint_bindings['saml'] = 'alpha'
+ .apps['flask-k8s'].endpoint_bindings['secret-storage'] = 'alpha'
+ .apps['flask-k8s'].endpoint_bindings['smtp'] = 'alpha'
+ .apps['flask-k8s'].endpoint_bindings['tracing'] = 'alpha'
+ .apps['http-proxy-configurator'].charm = 'http-proxy-configurator'
+ .apps['http-proxy-configurator'].charm_origin = 'charmhub'
+ .apps['http-proxy-configurator'].charm_name = 'http-proxy-configurator'
+ .apps['http-proxy-configurator'].charm_rev = 6
+ .apps['http-proxy-configurator'].exposed = False
+ .apps['http-proxy-configurator'].base.name = 'ubuntu'
+ .apps['http-proxy-configurator'].base.channel = '24.04'
+ .apps['http-proxy-configurator'].charm_channel = 'latest/edge'
+ .apps['http-proxy-configurator'].scale = 1
+ .apps['http-proxy-configurator'].provider_id = '60aa9126-41a3-4e7e-8b98-ba502fee72e6'
+ .apps['http-proxy-configurator'].address = '10.152.183.57'
+ .apps['http-proxy-configurator'].app_status.current = 'active'
+ .apps['http-proxy-configurator'].relations['http-proxy'][0].related_app = 'squid-forward-proxy'
+ .apps['http-proxy-configurator'].relations['http-proxy'][0].interface = 'http_proxy'
+ .apps['http-proxy-configurator'].units['http-proxy-configurator/0'].workload_status.current = 'active'
+ .apps['http-proxy-configurator'].units['http-proxy-configurator/0'].juju_status.current = 'idle'
+ .apps['http-proxy-configurator'].units['http-proxy-configurator/0'].juju_status.version = '3.6.11'
+ .apps['http-proxy-configurator'].units['http-proxy-configurator/0'].leader = True
+ .apps['http-proxy-configurator'].units['http-proxy-configurator/0'].address = '10.1.50.138'
+ .apps['http-proxy-configurator'].units['http-proxy-configurator/0'].provider_id = 'http-proxy-configurator-0'
+ .apps['http-proxy-configurator'].endpoint_bindings[''] = 'alpha'
+ .apps['http-proxy-configurator'].endpoint_bindings['delegate-http-proxy'] = 'alpha'
+ .apps['http-proxy-configurator'].endpoint_bindings['http-proxy'] = 'alpha'
+ .app_endpoints['squid-forward-proxy'].url = 'localhost:admin/testing.squid-forward-proxy'
+ .app_endpoints['squid-forward-proxy'].endpoints['http-proxy'].interface = 'http_proxy'
+ .app_endpoints['squid-forward-proxy'].endpoints['http-proxy'].role = 'provider'
+ .app_endpoints['squid-forward-proxy'].app_status.current = 'active'
+ .app_endpoints['squid-forward-proxy'].app_status.message = 'ready: 1'
+ .app_endpoints['squid-forward-proxy'].relations['http-proxy'][0] = 'http-proxy-configurator'
11:34:09 [32mINFO[0m wait: status changed:
+ .apps['flask-k8s'].provider_id = 'b3bb625c-5875-463a-bb60-a1a060ddf275'
+ .apps['flask-k8s'].address = '10.152.183.104'
+ .apps['flask-k8s'].units['flask-k8s/0'].address = '10.1.50.139'
+ .apps['flask-k8s'].units['flask-k8s/0'].provider_id = 'flask-k8s-0'
11:34:16 [32mINFO[0m wait: status changed:
- .apps['flask-k8s'].app_status.message = 'installing agent'
+ .apps['flask-k8s'].app_status.message = 'agent initialising'
- .apps['flask-k8s'].units['flask-k8s/0'].workload_status.message = 'installing agent'
+ .apps['flask-k8s'].units['flask-k8s/0'].workload_status.message = 'agent initialising'
+ .apps['flask-k8s'].units['flask-k8s/0'].juju_status.version = '3.6.11'
+ .apps['flask-k8s'].units['flask-k8s/0'].leader = True
11:34:17 [32mINFO[0m wait: status changed:
- .apps['flask-k8s'].app_status.current = 'waiting'
- .apps['flask-k8s'].app_status.message = 'agent initialising'
+ .apps['flask-k8s'].app_status.current = 'maintenance'
+ .apps['flask-k8s'].app_status.message = 'installing charm software'
- .apps['flask-k8s'].units['flask-k8s/0'].workload_status.current = 'waiting'
- .apps['flask-k8s'].units['flask-k8s/0'].workload_status.message = 'agent initialising'
- .apps['flask-k8s'].units['flask-k8s/0'].juju_status.current = 'allocating'
+ .apps['flask-k8s'].units['flask-k8s/0'].workload_status.current = 'maintenance'
+ .apps['flask-k8s'].units['flask-k8s/0'].workload_status.message = 'installing charm software'
+ .apps['flask-k8s'].units['flask-k8s/0'].juju_status.current = 'executing'
+ .apps['flask-k8s'].units['flask-k8s/0'].juju_status.message = 'running install hook'
11:34:20 [32mINFO[0m wait: status changed:
- .apps['flask-k8s'].units['flask-k8s/0'].juju_status.message = 'running install hook'
+ .apps['flask-k8s'].units['flask-k8s/0'].juju_status.message = 'running leader-elected hook'
11:34:21 [32mINFO[0m wait: status changed:
- .apps['flask-k8s'].app_status.current = 'maintenance'
- .apps['flask-k8s'].app_status.message = 'installing charm software'
+ .apps['flask-k8s'].app_status.current = 'waiting'
+ .apps['flask-k8s'].app_status.message = 'Waiting for pebble ready'
- .apps['flask-k8s'].units['flask-k8s/0'].workload_status.current = 'maintenance'
- .apps['flask-k8s'].units['flask-k8s/0'].workload_status.message = 'installing charm software'
+ .apps['flask-k8s'].units['flask-k8s/0'].workload_status.current = 'waiting'
+ .apps['flask-k8s'].units['flask-k8s/0'].workload_status.message = 'Waiting for pebble ready'
- .apps['flask-k8s'].units['flask-k8s/0'].juju_status.message = 'running leader-elected hook'
+ .apps['flask-k8s'].units['flask-k8s/0'].juju_status.message = 'running start hook'
11:34:23 [32mINFO[0m wait: status changed:
- .apps['flask-k8s'].units['flask-k8s/0'].juju_status.current = 'executing'
- .apps['flask-k8s'].units['flask-k8s/0'].juju_status.message = 'running start hook'
+ .apps['flask-k8s'].units['flask-k8s/0'].juju_status.current = 'idle'
11:34:24 [32mINFO[0m wait: status changed:
- .apps['flask-k8s'].app_status.current = 'waiting'
- .apps['flask-k8s'].app_status.message = 'Waiting for pebble ready'
+ .apps['flask-k8s'].app_status.current = 'maintenance'
+ .apps['flask-k8s'].app_status.message = 'Preparing service for restart'
- .apps['flask-k8s'].units['flask-k8s/0'].workload_status.current = 'waiting'
- .apps['flask-k8s'].units['flask-k8s/0'].workload_status.message = 'Waiting for pebble ready'
+ .apps['flask-k8s'].units['flask-k8s/0'].workload_status.current = 'maintenance'
+ .apps['flask-k8s'].units['flask-k8s/0'].workload_status.message = 'Preparing service for restart'
11:34:25 [32mINFO[0m wait: status changed:
- .apps['flask-k8s'].app_status.current = 'maintenance'
- .apps['flask-k8s'].app_status.message = 'Preparing service for restart'
+ .apps['flask-k8s'].app_status.current = 'waiting'
+ .apps['flask-k8s'].app_status.message = 'installing agent'
- .apps['flask-k8s'].units['flask-k8s/0'].workload_status.current = 'maintenance'
- .apps['flask-k8s'].units['flask-k8s/0'].workload_status.message = 'Preparing service for restart'
+ .apps['flask-k8s'].units['flask-k8s/0'].workload_status.current = 'active'
11:34:26 [32mINFO[0m wait: status changed:
- .apps['flask-k8s'].app_status.current = 'waiting'
- .apps['flask-k8s'].app_status.message = 'installing agent'
+ .apps['flask-k8s'].app_status.current = 'maintenance'
+ .apps['flask-k8s'].app_status.message = 'Preparing service for restart'
- .apps['flask-k8s'].units['flask-k8s/0'].workload_status.current = 'active'
+ .apps['flask-k8s'].units['flask-k8s/0'].workload_status.current = 'maintenance'
+ .apps['flask-k8s'].units['flask-k8s/0'].workload_status.message = 'Preparing service for restart'
11:34:28 [32mINFO[0m wait: status changed:
- .apps['flask-k8s'].app_status.current = 'maintenance'
- .apps['flask-k8s'].app_status.message = 'Preparing service for restart'
+ .apps['flask-k8s'].app_status.current = 'waiting'
+ .apps['flask-k8s'].app_status.message = 'installing agent'
- .apps['flask-k8s'].units['flask-k8s/0'].workload_status.current = 'maintenance'
- .apps['flask-k8s'].units['flask-k8s/0'].workload_status.message = 'Preparing service for restart'
+ .apps['flask-k8s'].units['flask-k8s/0'].workload_status.current = 'active'
11:34:36 [32mINFO[0m wait: status changed:
- .apps['flask-k8s'].app_status.current = 'waiting'
- .apps['flask-k8s'].app_status.message = 'installing agent'
+ .apps['flask-k8s'].app_status.current = 'active'
11:34:39 [32mINFO[0m cli: juju integrate --model testing flask-k8s http-proxy-configurator
11:34:39 [32mINFO[0m wait: status changed:
+ .model.name = 'testing'
+ .model.type = 'caas'
+ .model.controller = 'github-pr-5351f-microk8s'
+ .model.cloud = 'microk8s'
+ .model.version = '3.6.11'
+ .model.region = 'localhost'
+ .model.model_status.current = 'available'
+ .apps['flask-k8s'].charm = 'local:flask-k8s-0'
+ .apps['flask-k8s'].charm_origin = 'local'
+ .apps['flask-k8s'].charm_name = 'flask-k8s'
+ .apps['flask-k8s'].charm_rev = 0
+ .apps['flask-k8s'].exposed = False
+ .apps['flask-k8s'].base.name = 'ubuntu'
+ .apps['flask-k8s'].base.channel = '22.04'
+ .apps['flask-k8s'].scale = 1
+ .apps['flask-k8s'].provider_id = 'b3bb625c-5875-463a-bb60-a1a060ddf275'
+ .apps['flask-k8s'].address = '10.152.183.104'
+ .apps['flask-k8s'].app_status.current = 'active'
+ .apps['flask-k8s'].relations['http-proxy'][0].related_app = 'http-proxy-configurator'
+ .apps['flask-k8s'].relations['http-proxy'][0].interface = 'http_proxy'
+ .apps['flask-k8s'].relations['http-proxy'][0].scope = 'global'
+ .apps['flask-k8s'].relations['secret-storage'][0].related_app = 'flask-k8s'
+ .apps['flask-k8s'].relations['secret-storage'][0].interface = 'secret-storage'
+ .apps['flask-k8s'].relations['secret-storage'][0].scope = 'global'
+ .apps['flask-k8s'].units['flask-k8s/0'].workload_status.current = 'active'
+ .apps['flask-k8s'].units['flask-k8s/0'].juju_status.current = 'executing'
+ .apps['flask-k8s'].units['flask-k8s/0'].juju_status.message = 'running http-proxy-relation-created hook'
+ .apps['flask-k8s'].units['flask-k8s/0'].juju_status.version = '3.6.11'
+ .apps['flask-k8s'].units['flask-k8s/0'].leader = True
+ .apps['flask-k8s'].units['flask-k8s/0'].address = '10.1.50.139'
+ .apps['flask-k8s'].units['flask-k8s/0'].provider_id = 'flask-k8s-0'
+ .apps['flask-k8s'].endpoint_bindings[''] = 'alpha'
+ .apps['flask-k8s'].endpoint_bindings['grafana-dashboard'] = 'alpha'
+ .apps['flask-k8s'].endpoint_bindings['http-proxy'] = 'alpha'
+ .apps['flask-k8s'].endpoint_bindings['ingress'] = 'alpha'
+ .apps['flask-k8s'].endpoint_bindings['logging'] = 'alpha'
+ .apps['flask-k8s'].endpoint_bindings['metrics-endpoint'] = 'alpha'
+ .apps['flask-k8s'].endpoint_bindings['mongodb'] = 'alpha'
+ .apps['flask-k8s'].endpoint_bindings['mysql'] = 'alpha'
+ .apps['flask-k8s'].endpoint_bindings['oidc'] = 'alpha'
+ .apps['flask-k8s'].endpoint_bindings['openfga'] = 'alpha'
+ .apps['flask-k8s'].endpoint_bindings['postgresql'] = 'alpha'
+ .apps['flask-k8s'].endpoint_bindings['rabbitmq'] = 'alpha'
+ .apps['flask-k8s'].endpoint_bindings['redis'] = 'alpha'
+ .apps['flask-k8s'].endpoint_bindings['s3'] = 'alpha'
+ .apps['flask-k8s'].endpoint_bindings['saml'] = 'alpha'
+ .apps['flask-k8s'].endpoint_bindings['secret-storage'] = 'alpha'
+ .apps['flask-k8s'].endpoint_bindings['smtp'] = 'alpha'
+ .apps['flask-k8s'].endpoint_bindings['tracing'] = 'alpha'
+ .apps['http-proxy-configurator'].charm = 'http-proxy-configurator'
+ .apps['http-proxy-configurator'].charm_origin = 'charmhub'
+ .apps['http-proxy-configurator'].charm_name = 'http-proxy-configurator'
+ .apps['http-proxy-configurator'].charm_rev = 6
+ .apps['http-proxy-configurator'].exposed = False
+ .apps['http-proxy-configurator'].base.name = 'ubuntu'
+ .apps['http-proxy-configurator'].base.channel = '24.04'
+ .apps['http-proxy-configurator'].charm_channel = 'latest/edge'
+ .apps['http-proxy-configurator'].scale = 1
+ .apps['http-proxy-configurator'].provider_id = '60aa9126-41a3-4e7e-8b98-ba502fee72e6'
+ .apps['http-proxy-configurator'].address = '10.152.183.57'
+ .apps['http-proxy-configurator'].app_status.current = 'active'
+ .apps['http-proxy-configurator'].relations['delegate-http-proxy'][0].related_app = 'flask-k8s'
+ .apps['http-proxy-configurator'].relations['delegate-http-proxy'][0].interface = 'http_proxy'
+ .apps['http-proxy-configurator'].relations['delegate-http-proxy'][0].scope = 'global'
+ .apps['http-proxy-configurator'].relations['http-proxy'][0].related_app = 'squid-forward-proxy'
+ .apps['http-proxy-configurator'].relations['http-proxy'][0].interface = 'http_proxy'
+ .apps['http-proxy-configurator'].units['http-proxy-configurator/0'].workload_status.current = 'active'
+ .apps['http-proxy-configurator'].units['http-proxy-configurator/0'].juju_status.current = 'executing'
+ .apps['http-proxy-configurator'].units['http-proxy-configurator/0'].juju_status.message = 'running delegate-http-proxy-relation-created hook'
+ .apps['http-proxy-configurator'].units['http-proxy-configurator/0'].juju_status.version = '3.6.11'
+ .apps['http-proxy-configurator'].units['http-proxy-configurator/0'].leader = True
+ .apps['http-proxy-configurator'].units['http-proxy-configurator/0'].address = '10.1.50.138'
+ .apps['http-proxy-configurator'].units['http-proxy-configurator/0'].provider_id = 'http-proxy-configurator-0'
+ .apps['http-proxy-configurator'].endpoint_bindings[''] = 'alpha'
+ .apps['http-proxy-configurator'].endpoint_bindings['delegate-http-proxy'] = 'alpha'
+ .apps['http-proxy-configurator'].endpoint_bindings['http-proxy'] = 'alpha'
+ .app_endpoints['squid-forward-proxy'].url = 'localhost:admin/testing.squid-forward-proxy'
+ .app_endpoints['squid-forward-proxy'].endpoints['http-proxy'].interface = 'http_proxy'
+ .app_endpoints['squid-forward-proxy'].endpoints['http-proxy'].role = 'provider'
+ .app_endpoints['squid-forward-proxy'].app_status.current = 'active'
+ .app_endpoints['squid-forward-proxy'].app_status.message = 'ready: 1'
+ .app_endpoints['squid-forward-proxy'].relations['http-proxy'][0] = 'http-proxy-configurator'
11:34:50 [32mINFO[0m wait: status changed:
- .apps['flask-k8s'].units['flask-k8s/0'].juju_status.current = 'executing'
- .apps['flask-k8s'].units['flask-k8s/0'].juju_status.message = 'running http-proxy-relation-created hook'
+ .apps['flask-k8s'].units['flask-k8s/0'].juju_status.current = 'idle'
- .apps['http-proxy-configurator'].units['http-proxy-configurator/0'].juju_status.current = 'executing'
- .apps['http-proxy-configurator'].units['http-proxy-configurator/0'].juju_status.message = 'running delegate-http-proxy-relation-created hook'
+ .apps['http-proxy-configurator'].units['http-proxy-configurator/0'].juju_status.current = 'idle'
11:35:00 [32mINFO[0m cli: juju status --model testing --format json
11:35:00 [32mINFO[0m cli: juju remove-relation --model testing flask-k8s http-proxy-configurator