{"uid":"92b412695f5889c2","name":"test_with_database[postgresql/status-postgresql-k8s-14/edge-None-True]","fullName":"tests.integration.flask.test_database#test_with_database","historyId":"c17289e37937ca20f259b2852937c9bf","time":{"start":1770477582420,"stop":1770477766098,"duration":183678},"description":"\n    arrange: build and deploy the flask charm.\n    act: deploy the database and relate it to the charm.\n    assert: requesting the charm should return a correct response\n    ","descriptionHtml":"<pre><code>arrange: build and deploy the flask charm.\nact: deploy the database and relate it to the charm.\nassert: requesting the charm should return a correct response\n</code></pre>\n","status":"broken","statusMessage":"TimeoutError: wait timed out after 180.0s\nStatus(\n  model=ModelStatus(\n    name='testing',\n    type='caas',\n    controller='github-pr-fcc63-microk8s',\n    cloud='microk8s',\n    version='3.6.14',\n    region='localhost',\n    model_status=StatusInfo(current='available', since='07 Feb 2026 15:12:21Z'),\n  ),\n  machines={},\n  apps={\n    'flask-k8s': AppStatus(\n      charm='local:flask-k8s-0',\n      charm_origin='local',\n      charm_name='flask-k8s',\n      charm_rev=0,\n      exposed=False,\n      base=FormattedBase(name='ubuntu', channel='22.04'),\n      scale=1,\n      provider_id='e104b6b4-dcde-461a-b1ff-73537fe94f2e',\n      address='10.152.183.139',\n      app_status=StatusInfo(current='active', since='07 Feb 2026 15:19:39Z'),\n      relations={\n        'secret-storage': [\n          AppStatusRelation(related_app='flask-k8s', interface='secret-storage', scope='global'),\n        ],\n      },\n      units={\n        'flask-k8s/0': UnitStatus(\n          workload_status=StatusInfo(current='active', since='07 Feb 2026 15:19:39Z'),\n          juju_status=StatusInfo(current='idle', since='07 Feb 2026 15:19:39Z', version='3.6.14'),\n          leader=True,\n          address='10.1.76.140',\n          provider_id='flask-k8s-0',\n        ),\n      },\n      endpoint_bindings={\n        '': 'alpha',\n        'grafana-dashboard': 'alpha',\n        'http-proxy': 'alpha',\n        'ingress': 'alpha',\n        'logging': 'alpha',\n        'metrics-endpoint': 'alpha',\n        'mongodb': 'alpha',\n        'mysql': 'alpha',\n        'oidc': 'alpha',\n        'openfga': 'alpha',\n        'postgresql': 'alpha',\n        'rabbitmq': 'alpha',\n        'redis': 'alpha',\n        's3': 'alpha',\n        'saml': 'alpha',\n        'secret-storage': 'alpha',\n        'smtp': 'alpha',\n        'tracing': 'alpha',\n      },\n    ),\n    'postgresql-k8s': AppStatus(\n      charm='postgresql-k8s',\n      charm_origin='charmhub',\n      charm_name='postgresql-k8s',\n      charm_rev=736,\n      exposed=False,\n      base=FormattedBase(name='ubuntu', channel='22.04'),\n      charm_channel='14/edge',\n      scale=1,\n      provider_id='1b64b5b2-f373-46fb-b8d0-aa1aa3a4829c',\n      address='10.152.183.74',\n      app_status=StatusInfo(current='waiting', message='awaiting for cluster to start', since='07 Feb 2026 15:21:17Z'),\n      relations={\n        'database-peers': [\n          AppStatusRelation(related_app='postgresql-k8s', interface='postgresql_peers', scope='global'),\n        ],\n        'restart': [\n          AppStatusRelation(related_app='postgresql-k8s', interface='rolling_op', scope='global'),\n        ],\n        'upgrade': [\n          AppStatusRelation(related_app='postgresql-k8s', interface='upgrade', scope='global'),\n        ],\n      },\n      units={\n        'postgresql-k8s/0': UnitStatus(\n          workload_status=StatusInfo(current='waiting', message='awaiting for cluster to start', since='07 Feb 2026 15:21:17Z'),\n          juju_status=StatusInfo(current='idle', since='07 Feb 2026 15:21:40Z', version='3.6.14'),\n          leader=True,\n          address='10.1.76.142',\n          provider_id='postgresql-k8s-0',\n        ),\n      },\n      version='14.20',\n      endpoint_bindings={\n        '': 'alpha',\n        'certificates': 'alpha',\n        'database': 'alpha',\n        'database-peers': 'alpha',\n        'db': 'alpha',\n        'db-admin': 'alpha',\n        'grafana-dashboard': 'alpha',\n        'ldap': 'alpha',\n        'logging': 'alpha',\n        'metrics-endpoint': 'alpha',\n        'receive-ca-cert': 'alpha',\n        'replication': 'alpha',\n        'replication-offer': 'alpha',\n        'restart': 'alpha',\n        's3-parameters': 'alpha',\n        'tracing': 'alpha',\n        'upgrade': 'alpha',\n      },\n    ),\n  },\n  storage=CombinedStorage(\n    storage={\n      'pgdata/0': StorageInfo(\n        kind='filesystem',\n        status=EntityStatus(current='attached', message='Successfully provisioned volume pvc-8f5878f1-0c31-4a87-86c8-9dade4cf040a', since='07 Feb 2026 15:19:56Z'),\n        persistent=False,\n        life='alive',\n        attachments=StorageAttachments(\n          units={\n            'postgresql-k8s/0': UnitStorageAttachment(life='alive'),\n          },\n        ),\n      ),\n    },\n    filesystems={\n      '0': FilesystemInfo(\n        size=1024,\n        provider_id='8f5878f1-0c31-4a87-86c8-9dade4cf040a',\n        volume='0',\n        storage='pgdata/0',\n        attachments=FilesystemAttachments(\n          containers={\n            'postgresql-k8s/0': FilesystemAttachment(mount_point='/var/lib/postgresql/data', read_only=False, life='alive'),\n          },\n          units={\n            'postgresql-k8s/0': UnitStorageAttachment(life='alive'),\n          },\n        ),\n        pool='kubernetes',\n        life='alive',\n        status=EntityStatus(current='attached', message='Successfully provisioned volume pvc-8f5878f1-0c31-4a87-86c8-9dade4cf040a', since='07 Feb 2026 15:19:56Z'),\n      ),\n    },\n    volumes={\n      '0': VolumeInfo(\n        size=1024,\n        persistent=True,\n        provider_id='pvc-8f5878f1-0c31-4a87-86c8-9dade4cf040a',\n        storage='pgdata/0',\n        attachments=VolumeAttachments(\n          containers={\n            'postgresql-k8s/0': VolumeAttachment(read_only=False, life='alive'),\n          },\n          units={\n            'postgresql-k8s/0': UnitStorageAttachment(life='alive'),\n          },\n        ),\n        pool='kubernetes',\n        life='alive',\n        status=EntityStatus(current='attached', since='07 Feb 2026 15:19:56Z'),\n      ),\n    },\n  ),\n  controller=ControllerStatus(timestamp='15:22:45Z'),\n)","statusTrace":"Traceback (most recent call last):\n  File \"/home/runner/work/paas-charm/paas-charm/.tox/integration/lib/python3.12/site-packages/_pytest/runner.py\", line 353, in from_call\n    result: TResult | None = func()\n                             ^^^^^^\n  File \"/home/runner/work/paas-charm/paas-charm/.tox/integration/lib/python3.12/site-packages/_pytest/runner.py\", line 245, in <lambda>\n    lambda: runtest_hook(item=item, **kwds),\n            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/paas-charm/paas-charm/.tox/integration/lib/python3.12/site-packages/pluggy/_hooks.py\", line 512, in __call__\n    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/paas-charm/paas-charm/.tox/integration/lib/python3.12/site-packages/pluggy/_manager.py\", line 120, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/paas-charm/paas-charm/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 167, in _multicall\n    raise exception\n  File \"/home/runner/work/paas-charm/paas-charm/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 139, in _multicall\n    teardown.throw(exception)\n  File \"/home/runner/work/paas-charm/paas-charm/.tox/integration/lib/python3.12/site-packages/_pytest/logging.py\", line 850, in pytest_runtest_call\n    yield\n  File \"/home/runner/work/paas-charm/paas-charm/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 139, in _multicall\n    teardown.throw(exception)\n  File \"/home/runner/work/paas-charm/paas-charm/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 53, in run_old_style_hookwrapper\n    return result.get_result()\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/paas-charm/paas-charm/.tox/integration/lib/python3.12/site-packages/pluggy/_result.py\", line 103, in get_result\n    raise exc.with_traceback(tb)\n  File \"/home/runner/work/paas-charm/paas-charm/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 38, in run_old_style_hookwrapper\n    res = yield\n          ^^^^^\n  File \"/home/runner/work/paas-charm/paas-charm/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 139, in _multicall\n    teardown.throw(exception)\n  File \"/home/runner/work/paas-charm/paas-charm/.tox/integration/lib/python3.12/site-packages/_pytest/capture.py\", line 900, in pytest_runtest_call\n    return (yield)\n            ^^^^^\n  File \"/home/runner/work/paas-charm/paas-charm/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 139, in _multicall\n    teardown.throw(exception)\n  File \"/home/runner/work/paas-charm/paas-charm/.tox/integration/lib/python3.12/site-packages/_pytest/skipping.py\", line 268, in pytest_runtest_call\n    return (yield)\n            ^^^^^\n  File \"/home/runner/work/paas-charm/paas-charm/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 121, in _multicall\n    res = hook_impl.function(*args)\n          ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/paas-charm/paas-charm/.tox/integration/lib/python3.12/site-packages/_pytest/runner.py\", line 179, in pytest_runtest_call\n    item.runtest()\n  File \"/home/runner/work/paas-charm/paas-charm/.tox/integration/lib/python3.12/site-packages/_pytest/python.py\", line 1720, in runtest\n    self.ihook.pytest_pyfunc_call(pyfuncitem=self)\n  File \"/home/runner/work/paas-charm/paas-charm/.tox/integration/lib/python3.12/site-packages/pluggy/_hooks.py\", line 512, in __call__\n    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/paas-charm/paas-charm/.tox/integration/lib/python3.12/site-packages/pluggy/_manager.py\", line 120, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/paas-charm/paas-charm/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 167, in _multicall\n    raise exception\n  File \"/home/runner/work/paas-charm/paas-charm/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 121, in _multicall\n    res = hook_impl.function(*args)\n          ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/paas-charm/paas-charm/.tox/integration/lib/python3.12/site-packages/_pytest/python.py\", line 166, in pytest_pyfunc_call\n    result = testfunction(**testargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/paas-charm/paas-charm/tests/integration/flask/test_database.py\", line 47, in test_with_database\n    juju.wait(lambda status: status.apps.get(db_name, False) and status.apps[db_name].is_active)\n  File \"/home/runner/work/paas-charm/paas-charm/.tox/integration/lib/python3.12/site-packages/jubilant/_juju.py\", line 1476, in wait\n    raise TimeoutError(f'wait timed out after {timeout}s\\n{status}')\nTimeoutError: wait timed out after 180.0s\nStatus(\n  model=ModelStatus(\n    name='testing',\n    type='caas',\n    controller='github-pr-fcc63-microk8s',\n    cloud='microk8s',\n    version='3.6.14',\n    region='localhost',\n    model_status=StatusInfo(current='available', since='07 Feb 2026 15:12:21Z'),\n  ),\n  machines={},\n  apps={\n    'flask-k8s': AppStatus(\n      charm='local:flask-k8s-0',\n      charm_origin='local',\n      charm_name='flask-k8s',\n      charm_rev=0,\n      exposed=False,\n      base=FormattedBase(name='ubuntu', channel='22.04'),\n      scale=1,\n      provider_id='e104b6b4-dcde-461a-b1ff-73537fe94f2e',\n      address='10.152.183.139',\n      app_status=StatusInfo(current='active', since='07 Feb 2026 15:19:39Z'),\n      relations={\n        'secret-storage': [\n          AppStatusRelation(related_app='flask-k8s', interface='secret-storage', scope='global'),\n        ],\n      },\n      units={\n        'flask-k8s/0': UnitStatus(\n          workload_status=StatusInfo(current='active', since='07 Feb 2026 15:19:39Z'),\n          juju_status=StatusInfo(current='idle', since='07 Feb 2026 15:19:39Z', version='3.6.14'),\n          leader=True,\n          address='10.1.76.140',\n          provider_id='flask-k8s-0',\n        ),\n      },\n      endpoint_bindings={\n        '': 'alpha',\n        'grafana-dashboard': 'alpha',\n        'http-proxy': 'alpha',\n        'ingress': 'alpha',\n        'logging': 'alpha',\n        'metrics-endpoint': 'alpha',\n        'mongodb': 'alpha',\n        'mysql': 'alpha',\n        'oidc': 'alpha',\n        'openfga': 'alpha',\n        'postgresql': 'alpha',\n        'rabbitmq': 'alpha',\n        'redis': 'alpha',\n        's3': 'alpha',\n        'saml': 'alpha',\n        'secret-storage': 'alpha',\n        'smtp': 'alpha',\n        'tracing': 'alpha',\n      },\n    ),\n    'postgresql-k8s': AppStatus(\n      charm='postgresql-k8s',\n      charm_origin='charmhub',\n      charm_name='postgresql-k8s',\n      charm_rev=736,\n      exposed=False,\n      base=FormattedBase(name='ubuntu', channel='22.04'),\n      charm_channel='14/edge',\n      scale=1,\n      provider_id='1b64b5b2-f373-46fb-b8d0-aa1aa3a4829c',\n      address='10.152.183.74',\n      app_status=StatusInfo(current='waiting', message='awaiting for cluster to start', since='07 Feb 2026 15:21:17Z'),\n      relations={\n        'database-peers': [\n          AppStatusRelation(related_app='postgresql-k8s', interface='postgresql_peers', scope='global'),\n        ],\n        'restart': [\n          AppStatusRelation(related_app='postgresql-k8s', interface='rolling_op', scope='global'),\n        ],\n        'upgrade': [\n          AppStatusRelation(related_app='postgresql-k8s', interface='upgrade', scope='global'),\n        ],\n      },\n      units={\n        'postgresql-k8s/0': UnitStatus(\n          workload_status=StatusInfo(current='waiting', message='awaiting for cluster to start', since='07 Feb 2026 15:21:17Z'),\n          juju_status=StatusInfo(current='idle', since='07 Feb 2026 15:21:40Z', version='3.6.14'),\n          leader=True,\n          address='10.1.76.142',\n          provider_id='postgresql-k8s-0',\n        ),\n      },\n      version='14.20',\n      endpoint_bindings={\n        '': 'alpha',\n        'certificates': 'alpha',\n        'database': 'alpha',\n        'database-peers': 'alpha',\n        'db': 'alpha',\n        'db-admin': 'alpha',\n        'grafana-dashboard': 'alpha',\n        'ldap': 'alpha',\n        'logging': 'alpha',\n        'metrics-endpoint': 'alpha',\n        'receive-ca-cert': 'alpha',\n        'replication': 'alpha',\n        'replication-offer': 'alpha',\n        'restart': 'alpha',\n        's3-parameters': 'alpha',\n        'tracing': 'alpha',\n        'upgrade': 'alpha',\n      },\n    ),\n  },\n  storage=CombinedStorage(\n    storage={\n      'pgdata/0': StorageInfo(\n        kind='filesystem',\n        status=EntityStatus(current='attached', message='Successfully provisioned volume pvc-8f5878f1-0c31-4a87-86c8-9dade4cf040a', since='07 Feb 2026 15:19:56Z'),\n        persistent=False,\n        life='alive',\n        attachments=StorageAttachments(\n          units={\n            'postgresql-k8s/0': UnitStorageAttachment(life='alive'),\n          },\n        ),\n      ),\n    },\n    filesystems={\n      '0': FilesystemInfo(\n        size=1024,\n        provider_id='8f5878f1-0c31-4a87-86c8-9dade4cf040a',\n        volume='0',\n        storage='pgdata/0',\n        attachments=FilesystemAttachments(\n          containers={\n            'postgresql-k8s/0': FilesystemAttachment(mount_point='/var/lib/postgresql/data', read_only=False, life='alive'),\n          },\n          units={\n            'postgresql-k8s/0': UnitStorageAttachment(life='alive'),\n          },\n        ),\n        pool='kubernetes',\n        life='alive',\n        status=EntityStatus(current='attached', message='Successfully provisioned volume pvc-8f5878f1-0c31-4a87-86c8-9dade4cf040a', since='07 Feb 2026 15:19:56Z'),\n      ),\n    },\n    volumes={\n      '0': VolumeInfo(\n        size=1024,\n        persistent=True,\n        provider_id='pvc-8f5878f1-0c31-4a87-86c8-9dade4cf040a',\n        storage='pgdata/0',\n        attachments=VolumeAttachments(\n          containers={\n            'postgresql-k8s/0': VolumeAttachment(read_only=False, life='alive'),\n          },\n          units={\n            'postgresql-k8s/0': UnitStorageAttachment(life='alive'),\n          },\n        ),\n        pool='kubernetes',\n        life='alive',\n        status=EntityStatus(current='attached', since='07 Feb 2026 15:19:56Z'),\n      ),\n    },\n  ),\n  controller=ControllerStatus(timestamp='15:22:45Z'),\n)","flaky":false,"newFailed":false,"newBroken":true,"newPassed":false,"retriesCount":1,"retriesStatusChange":true,"beforeStages":[{"name":"pytestconfig","time":{"start":1770477549780,"stop":1770477549780,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"flask_app","time":{"start":1770477549780,"stop":1770477582418,"duration":32638},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"juju","time":{"start":1770477549780,"stop":1770477549780,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"tmp_path_factory","time":{"start":1770477549780,"stop":1770477549780,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"cwd","time":{"start":1770477582418,"stop":1770477582418,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"http","time":{"start":1770477582418,"stop":1770477582419,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"description":"\n    arrange: build and deploy the flask charm.\n    act: deploy the database and relate it to the charm.\n    assert: requesting the charm should return a correct response\n    ","status":"broken","statusMessage":"TimeoutError: wait timed out after 180.0s\nStatus(\n  model=ModelStatus(\n    name='testing',\n    type='caas',\n    controller='github-pr-fcc63-microk8s',\n    cloud='microk8s',\n    version='3.6.14',\n    region='localhost',\n    model_status=StatusInfo(current='available', since='07 Feb 2026 15:12:21Z'),\n  ),\n  machines={},\n  apps={\n    'flask-k8s': AppStatus(\n      charm='local:flask-k8s-0',\n      charm_origin='local',\n      charm_name='flask-k8s',\n      charm_rev=0,\n      exposed=False,\n      base=FormattedBase(name='ubuntu', channel='22.04'),\n      scale=1,\n      provider_id='e104b6b4-dcde-461a-b1ff-73537fe94f2e',\n      address='10.152.183.139',\n      app_status=StatusInfo(current='active', since='07 Feb 2026 15:19:39Z'),\n      relations={\n        'secret-storage': [\n          AppStatusRelation(related_app='flask-k8s', interface='secret-storage', scope='global'),\n        ],\n      },\n      units={\n        'flask-k8s/0': UnitStatus(\n          workload_status=StatusInfo(current='active', since='07 Feb 2026 15:19:39Z'),\n          juju_status=StatusInfo(current='idle', since='07 Feb 2026 15:19:39Z', version='3.6.14'),\n          leader=True,\n          address='10.1.76.140',\n          provider_id='flask-k8s-0',\n        ),\n      },\n      endpoint_bindings={\n        '': 'alpha',\n        'grafana-dashboard': 'alpha',\n        'http-proxy': 'alpha',\n        'ingress': 'alpha',\n        'logging': 'alpha',\n        'metrics-endpoint': 'alpha',\n        'mongodb': 'alpha',\n        'mysql': 'alpha',\n        'oidc': 'alpha',\n        'openfga': 'alpha',\n        'postgresql': 'alpha',\n        'rabbitmq': 'alpha',\n        'redis': 'alpha',\n        's3': 'alpha',\n        'saml': 'alpha',\n        'secret-storage': 'alpha',\n        'smtp': 'alpha',\n        'tracing': 'alpha',\n      },\n    ),\n    'postgresql-k8s': AppStatus(\n      charm='postgresql-k8s',\n      charm_origin='charmhub',\n      charm_name='postgresql-k8s',\n      charm_rev=736,\n      exposed=False,\n      base=FormattedBase(name='ubuntu', channel='22.04'),\n      charm_channel='14/edge',\n      scale=1,\n      provider_id='1b64b5b2-f373-46fb-b8d0-aa1aa3a4829c',\n      address='10.152.183.74',\n      app_status=StatusInfo(current='waiting', message='awaiting for cluster to start', since='07 Feb 2026 15:21:17Z'),\n      relations={\n        'database-peers': [\n          AppStatusRelation(related_app='postgresql-k8s', interface='postgresql_peers', scope='global'),\n        ],\n        'restart': [\n          AppStatusRelation(related_app='postgresql-k8s', interface='rolling_op', scope='global'),\n        ],\n        'upgrade': [\n          AppStatusRelation(related_app='postgresql-k8s', interface='upgrade', scope='global'),\n        ],\n      },\n      units={\n        'postgresql-k8s/0': UnitStatus(\n          workload_status=StatusInfo(current='waiting', message='awaiting for cluster to start', since='07 Feb 2026 15:21:17Z'),\n          juju_status=StatusInfo(current='idle', since='07 Feb 2026 15:21:40Z', version='3.6.14'),\n          leader=True,\n          address='10.1.76.142',\n          provider_id='postgresql-k8s-0',\n        ),\n      },\n      version='14.20',\n      endpoint_bindings={\n        '': 'alpha',\n        'certificates': 'alpha',\n        'database': 'alpha',\n        'database-peers': 'alpha',\n        'db': 'alpha',\n        'db-admin': 'alpha',\n        'grafana-dashboard': 'alpha',\n        'ldap': 'alpha',\n        'logging': 'alpha',\n        'metrics-endpoint': 'alpha',\n        'receive-ca-cert': 'alpha',\n        'replication': 'alpha',\n        'replication-offer': 'alpha',\n        'restart': 'alpha',\n        's3-parameters': 'alpha',\n        'tracing': 'alpha',\n        'upgrade': 'alpha',\n      },\n    ),\n  },\n  storage=CombinedStorage(\n    storage={\n      'pgdata/0': StorageInfo(\n        kind='filesystem',\n        status=EntityStatus(current='attached', message='Successfully provisioned volume pvc-8f5878f1-0c31-4a87-86c8-9dade4cf040a', since='07 Feb 2026 15:19:56Z'),\n        persistent=False,\n        life='alive',\n        attachments=StorageAttachments(\n          units={\n            'postgresql-k8s/0': UnitStorageAttachment(life='alive'),\n          },\n        ),\n      ),\n    },\n    filesystems={\n      '0': FilesystemInfo(\n        size=1024,\n        provider_id='8f5878f1-0c31-4a87-86c8-9dade4cf040a',\n        volume='0',\n        storage='pgdata/0',\n        attachments=FilesystemAttachments(\n          containers={\n            'postgresql-k8s/0': FilesystemAttachment(mount_point='/var/lib/postgresql/data', read_only=False, life='alive'),\n          },\n          units={\n            'postgresql-k8s/0': UnitStorageAttachment(life='alive'),\n          },\n        ),\n        pool='kubernetes',\n        life='alive',\n        status=EntityStatus(current='attached', message='Successfully provisioned volume pvc-8f5878f1-0c31-4a87-86c8-9dade4cf040a', since='07 Feb 2026 15:19:56Z'),\n      ),\n    },\n    volumes={\n      '0': VolumeInfo(\n        size=1024,\n        persistent=True,\n        provider_id='pvc-8f5878f1-0c31-4a87-86c8-9dade4cf040a',\n        storage='pgdata/0',\n        attachments=VolumeAttachments(\n          containers={\n            'postgresql-k8s/0': VolumeAttachment(read_only=False, life='alive'),\n          },\n          units={\n            'postgresql-k8s/0': UnitStorageAttachment(life='alive'),\n          },\n        ),\n        pool='kubernetes',\n        life='alive',\n        status=EntityStatus(current='attached', since='07 Feb 2026 15:19:56Z'),\n      ),\n    },\n  ),\n  controller=ControllerStatus(timestamp='15:22:45Z'),\n)","statusTrace":"Traceback (most recent call last):\n  File \"/home/runner/work/paas-charm/paas-charm/.tox/integration/lib/python3.12/site-packages/_pytest/runner.py\", line 353, in from_call\n    result: TResult | None = func()\n                             ^^^^^^\n  File \"/home/runner/work/paas-charm/paas-charm/.tox/integration/lib/python3.12/site-packages/_pytest/runner.py\", line 245, in <lambda>\n    lambda: runtest_hook(item=item, **kwds),\n            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/paas-charm/paas-charm/.tox/integration/lib/python3.12/site-packages/pluggy/_hooks.py\", line 512, in __call__\n    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/paas-charm/paas-charm/.tox/integration/lib/python3.12/site-packages/pluggy/_manager.py\", line 120, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/paas-charm/paas-charm/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 167, in _multicall\n    raise exception\n  File \"/home/runner/work/paas-charm/paas-charm/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 139, in _multicall\n    teardown.throw(exception)\n  File \"/home/runner/work/paas-charm/paas-charm/.tox/integration/lib/python3.12/site-packages/_pytest/logging.py\", line 850, in pytest_runtest_call\n    yield\n  File \"/home/runner/work/paas-charm/paas-charm/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 139, in _multicall\n    teardown.throw(exception)\n  File \"/home/runner/work/paas-charm/paas-charm/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 53, in run_old_style_hookwrapper\n    return result.get_result()\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/paas-charm/paas-charm/.tox/integration/lib/python3.12/site-packages/pluggy/_result.py\", line 103, in get_result\n    raise exc.with_traceback(tb)\n  File \"/home/runner/work/paas-charm/paas-charm/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 38, in run_old_style_hookwrapper\n    res = yield\n          ^^^^^\n  File \"/home/runner/work/paas-charm/paas-charm/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 139, in _multicall\n    teardown.throw(exception)\n  File \"/home/runner/work/paas-charm/paas-charm/.tox/integration/lib/python3.12/site-packages/_pytest/capture.py\", line 900, in pytest_runtest_call\n    return (yield)\n            ^^^^^\n  File \"/home/runner/work/paas-charm/paas-charm/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 139, in _multicall\n    teardown.throw(exception)\n  File \"/home/runner/work/paas-charm/paas-charm/.tox/integration/lib/python3.12/site-packages/_pytest/skipping.py\", line 268, in pytest_runtest_call\n    return (yield)\n            ^^^^^\n  File \"/home/runner/work/paas-charm/paas-charm/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 121, in _multicall\n    res = hook_impl.function(*args)\n          ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/paas-charm/paas-charm/.tox/integration/lib/python3.12/site-packages/_pytest/runner.py\", line 179, in pytest_runtest_call\n    item.runtest()\n  File \"/home/runner/work/paas-charm/paas-charm/.tox/integration/lib/python3.12/site-packages/_pytest/python.py\", line 1720, in runtest\n    self.ihook.pytest_pyfunc_call(pyfuncitem=self)\n  File \"/home/runner/work/paas-charm/paas-charm/.tox/integration/lib/python3.12/site-packages/pluggy/_hooks.py\", line 512, in __call__\n    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/paas-charm/paas-charm/.tox/integration/lib/python3.12/site-packages/pluggy/_manager.py\", line 120, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/paas-charm/paas-charm/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 167, in _multicall\n    raise exception\n  File \"/home/runner/work/paas-charm/paas-charm/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 121, in _multicall\n    res = hook_impl.function(*args)\n          ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/paas-charm/paas-charm/.tox/integration/lib/python3.12/site-packages/_pytest/python.py\", line 166, in pytest_pyfunc_call\n    result = testfunction(**testargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/paas-charm/paas-charm/tests/integration/flask/test_database.py\", line 47, in test_with_database\n    juju.wait(lambda status: status.apps.get(db_name, False) and status.apps[db_name].is_active)\n  File \"/home/runner/work/paas-charm/paas-charm/.tox/integration/lib/python3.12/site-packages/jubilant/_juju.py\", line 1476, in wait\n    raise TimeoutError(f'wait timed out after {timeout}s\\n{status}')\nTimeoutError: wait timed out after 180.0s\nStatus(\n  model=ModelStatus(\n    name='testing',\n    type='caas',\n    controller='github-pr-fcc63-microk8s',\n    cloud='microk8s',\n    version='3.6.14',\n    region='localhost',\n    model_status=StatusInfo(current='available', since='07 Feb 2026 15:12:21Z'),\n  ),\n  machines={},\n  apps={\n    'flask-k8s': AppStatus(\n      charm='local:flask-k8s-0',\n      charm_origin='local',\n      charm_name='flask-k8s',\n      charm_rev=0,\n      exposed=False,\n      base=FormattedBase(name='ubuntu', channel='22.04'),\n      scale=1,\n      provider_id='e104b6b4-dcde-461a-b1ff-73537fe94f2e',\n      address='10.152.183.139',\n      app_status=StatusInfo(current='active', since='07 Feb 2026 15:19:39Z'),\n      relations={\n        'secret-storage': [\n          AppStatusRelation(related_app='flask-k8s', interface='secret-storage', scope='global'),\n        ],\n      },\n      units={\n        'flask-k8s/0': UnitStatus(\n          workload_status=StatusInfo(current='active', since='07 Feb 2026 15:19:39Z'),\n          juju_status=StatusInfo(current='idle', since='07 Feb 2026 15:19:39Z', version='3.6.14'),\n          leader=True,\n          address='10.1.76.140',\n          provider_id='flask-k8s-0',\n        ),\n      },\n      endpoint_bindings={\n        '': 'alpha',\n        'grafana-dashboard': 'alpha',\n        'http-proxy': 'alpha',\n        'ingress': 'alpha',\n        'logging': 'alpha',\n        'metrics-endpoint': 'alpha',\n        'mongodb': 'alpha',\n        'mysql': 'alpha',\n        'oidc': 'alpha',\n        'openfga': 'alpha',\n        'postgresql': 'alpha',\n        'rabbitmq': 'alpha',\n        'redis': 'alpha',\n        's3': 'alpha',\n        'saml': 'alpha',\n        'secret-storage': 'alpha',\n        'smtp': 'alpha',\n        'tracing': 'alpha',\n      },\n    ),\n    'postgresql-k8s': AppStatus(\n      charm='postgresql-k8s',\n      charm_origin='charmhub',\n      charm_name='postgresql-k8s',\n      charm_rev=736,\n      exposed=False,\n      base=FormattedBase(name='ubuntu', channel='22.04'),\n      charm_channel='14/edge',\n      scale=1,\n      provider_id='1b64b5b2-f373-46fb-b8d0-aa1aa3a4829c',\n      address='10.152.183.74',\n      app_status=StatusInfo(current='waiting', message='awaiting for cluster to start', since='07 Feb 2026 15:21:17Z'),\n      relations={\n        'database-peers': [\n          AppStatusRelation(related_app='postgresql-k8s', interface='postgresql_peers', scope='global'),\n        ],\n        'restart': [\n          AppStatusRelation(related_app='postgresql-k8s', interface='rolling_op', scope='global'),\n        ],\n        'upgrade': [\n          AppStatusRelation(related_app='postgresql-k8s', interface='upgrade', scope='global'),\n        ],\n      },\n      units={\n        'postgresql-k8s/0': UnitStatus(\n          workload_status=StatusInfo(current='waiting', message='awaiting for cluster to start', since='07 Feb 2026 15:21:17Z'),\n          juju_status=StatusInfo(current='idle', since='07 Feb 2026 15:21:40Z', version='3.6.14'),\n          leader=True,\n          address='10.1.76.142',\n          provider_id='postgresql-k8s-0',\n        ),\n      },\n      version='14.20',\n      endpoint_bindings={\n        '': 'alpha',\n        'certificates': 'alpha',\n        'database': 'alpha',\n        'database-peers': 'alpha',\n        'db': 'alpha',\n        'db-admin': 'alpha',\n        'grafana-dashboard': 'alpha',\n        'ldap': 'alpha',\n        'logging': 'alpha',\n        'metrics-endpoint': 'alpha',\n        'receive-ca-cert': 'alpha',\n        'replication': 'alpha',\n        'replication-offer': 'alpha',\n        'restart': 'alpha',\n        's3-parameters': 'alpha',\n        'tracing': 'alpha',\n        'upgrade': 'alpha',\n      },\n    ),\n  },\n  storage=CombinedStorage(\n    storage={\n      'pgdata/0': StorageInfo(\n        kind='filesystem',\n        status=EntityStatus(current='attached', message='Successfully provisioned volume pvc-8f5878f1-0c31-4a87-86c8-9dade4cf040a', since='07 Feb 2026 15:19:56Z'),\n        persistent=False,\n        life='alive',\n        attachments=StorageAttachments(\n          units={\n            'postgresql-k8s/0': UnitStorageAttachment(life='alive'),\n          },\n        ),\n      ),\n    },\n    filesystems={\n      '0': FilesystemInfo(\n        size=1024,\n        provider_id='8f5878f1-0c31-4a87-86c8-9dade4cf040a',\n        volume='0',\n        storage='pgdata/0',\n        attachments=FilesystemAttachments(\n          containers={\n            'postgresql-k8s/0': FilesystemAttachment(mount_point='/var/lib/postgresql/data', read_only=False, life='alive'),\n          },\n          units={\n            'postgresql-k8s/0': UnitStorageAttachment(life='alive'),\n          },\n        ),\n        pool='kubernetes',\n        life='alive',\n        status=EntityStatus(current='attached', message='Successfully provisioned volume pvc-8f5878f1-0c31-4a87-86c8-9dade4cf040a', since='07 Feb 2026 15:19:56Z'),\n      ),\n    },\n    volumes={\n      '0': VolumeInfo(\n        size=1024,\n        persistent=True,\n        provider_id='pvc-8f5878f1-0c31-4a87-86c8-9dade4cf040a',\n        storage='pgdata/0',\n        attachments=VolumeAttachments(\n          containers={\n            'postgresql-k8s/0': VolumeAttachment(read_only=False, life='alive'),\n          },\n          units={\n            'postgresql-k8s/0': UnitStorageAttachment(life='alive'),\n          },\n        ),\n        pool='kubernetes',\n        life='alive',\n        status=EntityStatus(current='attached', since='07 Feb 2026 15:19:56Z'),\n      ),\n    },\n  ),\n  controller=ControllerStatus(timestamp='15:22:45Z'),\n)","steps":[],"attachments":[{"uid":"55925971a4e488be","name":"log","source":"55925971a4e488be.txt","type":"text/plain","size":22586}],"parameters":[],"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"http::0","time":{"start":1770477766102,"stop":1770477766102,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"flask_app::0","time":{"start":1770477766102,"stop":1770477766102,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"parentSuite","value":"tests.integration.flask"},{"name":"suite","value":"test_database"},{"name":"host","value":"runnervmwffz4"},{"name":"thread","value":"36815-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.integration.flask.test_database"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"db_channel","value":"'14/edge'"},{"name":"db_name","value":"'postgresql-k8s'"},{"name":"endpoint","value":"'postgresql/status'"},{"name":"revision","value":"None"},{"name":"trust","value":"True"}],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[{"uid":"7b4de890ce4125a5","status":"unknown","time":{}}],"categories":[{"name":"Test defects","matchedStatuses":[]}],"history":{"statistic":{"failed":0,"broken":3,"skipped":0,"passed":26,"unknown":3,"total":32},"items":[{"uid":"5509259a9a69cac9","reportUrl":"../1327//#testresult/5509259a9a69cac9","status":"passed","time":{"start":1769872734385,"stop":1769872861559,"duration":127174}},{"uid":"99a4eff90e537147","reportUrl":"../1268//#testresult/99a4eff90e537147","status":"passed","time":{"start":1769267869687,"stop":1769267992970,"duration":123283}},{"uid":"449fb3d045a77c25","reportUrl":"../1267//#testresult/449fb3d045a77c25","status":"passed","time":{"start":1768663112730,"stop":1768663242243,"duration":129513}},{"uid":"54d5f9bec06dd29a","reportUrl":"../1248//#testresult/54d5f9bec06dd29a","status":"unknown","time":{}},{"uid":"a17076dfdae8240c","reportUrl":"../1246//#testresult/a17076dfdae8240c","status":"unknown","time":{}},{"uid":"b7f5ce576c622d15","reportUrl":"../1245//#testresult/b7f5ce576c622d15","status":"passed","time":{"start":1766848689795,"stop":1766849071929,"duration":382134}},{"uid":"3226ca957903464f","reportUrl":"../1244//#testresult/3226ca957903464f","status":"unknown","time":{}},{"uid":"f45e93ade29171c8","reportUrl":"../1226//#testresult/f45e93ade29171c8","status":"passed","time":{"start":1765639066655,"stop":1765639192687,"duration":126032}},{"uid":"839924b134357e29","reportUrl":"../1201//#testresult/839924b134357e29","status":"passed","time":{"start":1765034268294,"stop":1765034397506,"duration":129212}},{"uid":"57d05f41560f687f","reportUrl":"../1197//#testresult/57d05f41560f687f","status":"passed","time":{"start":1764429815801,"stop":1764430212600,"duration":396799}},{"uid":"aed5db119a89a13d","reportUrl":"../1173//#testresult/aed5db119a89a13d","status":"passed","time":{"start":1763971543591,"stop":1763971990136,"duration":446545}},{"uid":"87f1ba64ca159a8e","reportUrl":"../1169//#testresult/87f1ba64ca159a8e","status":"passed","time":{"start":1763964194766,"stop":1763964318814,"duration":124048}},{"uid":"9332bed7181bc7d2","reportUrl":"../1159//#testresult/9332bed7181bc7d2","status":"passed","time":{"start":1763706693911,"stop":1763707081410,"duration":387499}},{"uid":"36a87ce10242143a","reportUrl":"../1158//#testresult/36a87ce10242143a","status":"passed","time":{"start":1763557190032,"stop":1763557302695,"duration":112663}},{"uid":"84d6fdbdecc85e1d","reportUrl":"../1156//#testresult/84d6fdbdecc85e1d","status":"passed","time":{"start":1763548703987,"stop":1763548829834,"duration":125847}},{"uid":"53f66fb01fd67061","reportUrl":"../1155//#testresult/53f66fb01fd67061","status":"passed","time":{"start":1763547211563,"stop":1763547604771,"duration":393208}},{"uid":"392b6b0971942b4a","reportUrl":"../1154//#testresult/392b6b0971942b4a","status":"passed","time":{"start":1763546458731,"stop":1763546586684,"duration":127953}},{"uid":"a648c188df488815","reportUrl":"../1153//#testresult/a648c188df488815","status":"passed","time":{"start":1763533896887,"stop":1763534275638,"duration":378751}},{"uid":"da1b02147ac7c370","reportUrl":"../1152//#testresult/da1b02147ac7c370","status":"passed","time":{"start":1763469385355,"stop":1763469515460,"duration":130105}},{"uid":"5516c216c79c37c5","reportUrl":"../1151//#testresult/5516c216c79c37c5","status":"passed","time":{"start":1763365679300,"stop":1763366073873,"duration":394573}}]},"tags":[]},"source":"92b412695f5889c2.json","parameterValues":["'14/edge'","'postgresql-k8s'","'postgresql/status'","None","True"]}