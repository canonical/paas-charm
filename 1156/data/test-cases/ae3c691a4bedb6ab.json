{"uid":"ae3c691a4bedb6ab","name":"test_expressjs_is_up","fullName":"tests.integration.expressjs.test_charm#test_expressjs_is_up","historyId":"627ba9dcfd0faa18104094d15846cfcc","time":{"start":1763548772926,"stop":1763548773199,"duration":273},"description":"\n    arrange: build and deploy the ExpressJS charm.\n    act: call the endpoint.\n    assert: the charm should respond with 200 OK.\n    ","descriptionHtml":"<pre><code>arrange: build and deploy the ExpressJS charm.\nact: call the endpoint.\nassert: the charm should respond with 200 OK.\n</code></pre>\n","status":"passed","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":1,"retriesStatusChange":true,"beforeStages":[{"name":"pytestconfig","time":{"start":1763548663996,"stop":1763548663996,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"tmp_path_factory","time":{"start":1763548663996,"stop":1763548663997,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"juju","time":{"start":1763548663996,"stop":1763548663996,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"expressjs_app","time":{"start":1763548663997,"stop":1763548772925,"duration":108928},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"abort_on_fail","time":{"start":1763548772925,"stop":1763548772925,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"description":"\n    arrange: build and deploy the ExpressJS charm.\n    act: call the endpoint.\n    assert: the charm should respond with 200 OK.\n    ","status":"passed","steps":[],"attachments":[{"uid":"e4131856ef4e1601","name":"log","source":"e4131856ef4e1601.txt","type":"text/plain","size":26415}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"abort_on_fail::0","time":{"start":1763548773199,"stop":1763548773199,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"juju::0","time":{"start":1763549712186,"stop":1763549712186,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"parentSuite","value":"tests.integration.expressjs"},{"name":"suite","value":"test_charm"},{"name":"host","value":"runnervmfxdz0"},{"name":"thread","value":"25468-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.integration.expressjs.test_charm"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[{"uid":"934e45e587b9f521","status":"unknown","time":{}}],"categories":[],"history":{"statistic":{"failed":0,"broken":2,"skipped":0,"passed":14,"unknown":1,"total":17},"items":[{"uid":"e58d371144dadf6b","reportUrl":"../1155//#testresult/e58d371144dadf6b","status":"passed","time":{"start":1763547244904,"stop":1763547245164,"duration":260}},{"uid":"c2b6b8ac29dd0384","reportUrl":"../1154//#testresult/c2b6b8ac29dd0384","status":"passed","time":{"start":1763546615856,"stop":1763546616117,"duration":261}},{"uid":"2291947239772231","reportUrl":"../1153//#testresult/2291947239772231","status":"passed","time":{"start":1763534002155,"stop":1763534002472,"duration":317}},{"uid":"261f4bae5b80fe4f","reportUrl":"../1152//#testresult/261f4bae5b80fe4f","status":"unknown","time":{}},{"uid":"1b9d80a07eb7b6de","reportUrl":"../1151//#testresult/1b9d80a07eb7b6de","status":"passed","time":{"start":1763365786151,"stop":1763365786399,"duration":248}},{"uid":"d1a2540a0f6c6844","reportUrl":"../1150//#testresult/d1a2540a0f6c6844","status":"passed","time":{"start":1763127017427,"stop":1763127017664,"duration":237}},{"uid":"71494f3fbd7c65a3","reportUrl":"../1148//#testresult/71494f3fbd7c65a3","status":"passed","time":{"start":1763124099413,"stop":1763124099764,"duration":351}},{"uid":"eabf28fd0a6cdb35","reportUrl":"../1147//#testresult/eabf28fd0a6cdb35","status":"broken","statusDetails":"TimeoutError: wait timed out after 300s\nStatus(\n  model=ModelStatus(\n    name='testing',\n    type='caas',\n    controller='github-pr-b7ed2-microk8s',\n    cloud='microk8s',\n    version='3.6.11',\n    region='localhost',\n    model_status=StatusInfo(current='available', since='14 Nov 2025 11:30:55Z'),\n  ),\n  machines={},\n  apps={\n    'expressjs-k8s': AppStatus(\n      charm='local:expressjs-k8s-0',\n      charm_origin='local',\n      charm_name='expressjs-k8s',\n      charm_rev=0,\n      exposed=False,\n      base=FormattedBase(name='ubuntu', channel='24.04'),\n      scale=1,\n      provider_id='871ac96c-fa74-42ee-960c-ba35287bbfcf',\n      address='10.152.183.138',\n      app_status=StatusInfo(current='blocked', message='missing integrations: postgresql', since='14 Nov 2025 11:32:41Z'),\n      relations={\n        'postgresql': [\n          AppStatusRelation(related_app='postgresql-k8s', interface='postgresql_client', scope='global'),\n        ],\n        'secret-storage': [\n          AppStatusRelation(related_app='expressjs-k8s', interface='secret-storage', scope='global'),\n        ],\n      },\n      units={\n        'expressjs-k8s/0': UnitStatus(\n          workload_status=StatusInfo(current='blocked', message='missing integrations: postgresql', since='14 Nov 2025 11:32:41Z'),\n          juju_status=StatusInfo(current='idle', since='14 Nov 2025 11:32:45Z', version='3.6.11'),\n          leader=True,\n          address='10.1.50.140',\n          provider_id='expressjs-k8s-0',\n        ),\n      },\n      endpoint_bindings={\n        '': 'alpha',\n        'grafana-dashboard': 'alpha',\n        'http-proxy': 'alpha',\n        'ingress': 'alpha',\n        'logging': 'alpha',\n        'metrics-endpoint': 'alpha',\n        'oidc': 'alpha',\n        'openfga': 'alpha',\n        'postgresql': 'alpha',\n        'secret-storage': 'alpha',\n        'smtp': 'alpha',\n        'tracing': 'alpha',\n      },\n    ),\n    'postgresql-k8s': AppStatus(\n      charm='postgresql-k8s',\n      charm_origin='charmhub',\n      charm_name='postgresql-k8s',\n      charm_rev=684,\n      exposed=False,\n      base=FormattedBase(name='ubuntu', channel='22.04'),\n      charm_channel='14/edge',\n      scale=1,\n      provider_id='4ea69ee5-a236-4573-96e8-6ae06c454d2d',\n      address='10.152.183.252',\n      app_status=StatusInfo(current='waiting', message='awaiting for primary endpoint to be ready', since='14 Nov 2025 11:32:58Z'),\n      relations={\n        'database': [\n          AppStatusRelation(related_app='expressjs-k8s', interface='postgresql_client', scope='global'),\n        ],\n        'database-peers': [\n          AppStatusRelation(related_app='postgresql-k8s', interface='postgresql_peers', scope='global'),\n        ],\n        'restart': [\n          AppStatusRelation(related_app='postgresql-k8s', interface='rolling_op', scope='global'),\n        ],\n        'upgrade': [\n          AppStatusRelation(related_app='postgresql-k8s', interface='upgrade', scope='global'),\n        ],\n      },\n      units={\n        'postgresql-k8s/0': UnitStatus(\n          workload_status=StatusInfo(current='waiting', message='awaiting for primary endpoint to be ready', since='14 Nov 2025 11:32:58Z'),\n          juju_status=StatusInfo(current='idle', since='14 Nov 2025 11:33:20Z', version='3.6.11'),\n          leader=True,\n          address='10.1.50.139',\n          provider_id='postgresql-k8s-0',\n        ),\n      },\n      endpoint_bindings={\n        '': 'alpha',\n        'certificates': 'alpha',\n        'database': 'alpha',\n        'database-peers': 'alpha',\n        'db': 'alpha',\n        'db-admin': 'alpha',\n        'grafana-dashboard': 'alpha',\n        'ldap': 'alpha',\n        'logging': 'alpha',\n        'metrics-endpoint': 'alpha',\n        'receive-ca-cert': 'alpha',\n        'replication': 'alpha',\n        'replication-offer': 'alpha',\n        'restart': 'alpha',\n        's3-parameters': 'alpha',\n        'tracing': 'alpha',\n        'upgrade': 'alpha',\n      },\n    ),\n  },\n  storage=CombinedStorage(\n    storage={\n      'pgdata/0': StorageInfo(\n        kind='filesystem',\n        status=EntityStatus(current='attached', message='Successfully provisioned volume pvc-9bb93cb5-96c0-4838-a5ac-abe7fe3fe33b', since='14 Nov 2025 11:32:20Z'),\n        persistent=False,\n        life='alive',\n        attachments=StorageAttachments(\n          units={\n            'postgresql-k8s/0': UnitStorageAttachment(life='alive'),\n          },\n        ),\n      ),\n    },\n    filesystems={\n      '0': FilesystemInfo(\n        size=1024,\n        provider_id='9bb93cb5-96c0-4838-a5ac-abe7fe3fe33b',\n        volume='0',\n        storage='pgdata/0',\n        attachments=FilesystemAttachments(\n          containers={\n            'postgresql-k8s/0': FilesystemAttachment(mount_point='/var/lib/postgresql/data', read_only=False, life='alive'),\n          },\n          units={\n            'postgresql-k8s/0': UnitStorageAttachment(life='alive'),\n          },\n        ),\n        pool='kubernetes',\n        life='alive',\n        status=EntityStatus(current='attached', message='Successfully provisioned volume pvc-9bb93cb5-96c0-4838-a5ac-abe7fe3fe33b', since='14 Nov 2025 11:32:20Z'),\n      ),\n    },\n    volumes={\n      '0': VolumeInfo(\n        size=1024,\n        persistent=True,\n        provider_id='pvc-9bb93cb5-96c0-4838-a5ac-abe7fe3fe33b',\n        storage='pgdata/0',\n        attachments=VolumeAttachments(\n          containers={\n            'postgresql-k8s/0': VolumeAttachment(read_only=False, life='alive'),\n          },\n          units={\n            'postgresql-k8s/0': UnitStorageAttachment(life='alive'),\n          },\n        ),\n        pool='kubernetes',\n        life='alive',\n        status=EntityStatus(current='attached', since='14 Nov 2025 11:32:20Z'),\n      ),\n    },\n  ),\n  controller=ControllerStatus(timestamp='11:37:06Z'),\n)","time":{"start":1763119920790,"stop":1763119920790,"duration":0}},{"uid":"22c6884f49edede1","reportUrl":"../1145//#testresult/22c6884f49edede1","status":"broken","statusDetails":"TimeoutError: wait timed out after 300s\nStatus(\n  model=ModelStatus(\n    name='testing',\n    type='caas',\n    controller='github-pr-5351f-microk8s',\n    cloud='microk8s',\n    version='3.6.11',\n    region='localhost',\n    model_status=StatusInfo(current='available', since='14 Nov 2025 11:29:32Z'),\n  ),\n  machines={},\n  apps={\n    'expressjs-k8s': AppStatus(\n      charm='local:expressjs-k8s-0',\n      charm_origin='local',\n      charm_name='expressjs-k8s',\n      charm_rev=0,\n      exposed=False,\n      base=FormattedBase(name='ubuntu', channel='24.04'),\n      scale=1,\n      provider_id='4b801b9a-1020-4950-a6d0-dbb98093662d',\n      address='10.152.183.156',\n      app_status=StatusInfo(current='blocked', message='missing integrations: postgresql', since='14 Nov 2025 11:32:02Z'),\n      relations={\n        'postgresql': [\n          AppStatusRelation(related_app='postgresql-k8s', interface='postgresql_client', scope='global'),\n        ],\n        'secret-storage': [\n          AppStatusRelation(related_app='expressjs-k8s', interface='secret-storage', scope='global'),\n        ],\n      },\n      units={\n        'expressjs-k8s/0': UnitStatus(\n          workload_status=StatusInfo(current='blocked', message='missing integrations: postgresql', since='14 Nov 2025 11:32:02Z'),\n          juju_status=StatusInfo(current='idle', since='14 Nov 2025 11:32:14Z', version='3.6.11'),\n          leader=True,\n          address='10.1.50.139',\n          provider_id='expressjs-k8s-0',\n        ),\n      },\n      endpoint_bindings={\n        '': 'alpha',\n        'grafana-dashboard': 'alpha',\n        'http-proxy': 'alpha',\n        'ingress': 'alpha',\n        'logging': 'alpha',\n        'metrics-endpoint': 'alpha',\n        'oidc': 'alpha',\n        'openfga': 'alpha',\n        'postgresql': 'alpha',\n        'secret-storage': 'alpha',\n        'smtp': 'alpha',\n        'tracing': 'alpha',\n      },\n    ),\n    'postgresql-k8s': AppStatus(\n      charm='postgresql-k8s',\n      charm_origin='charmhub',\n      charm_name='postgresql-k8s',\n      charm_rev=684,\n      exposed=False,\n      base=FormattedBase(name='ubuntu', channel='22.04'),\n      charm_channel='14/edge',\n      scale=1,\n      provider_id='aedaba5e-d1ce-47ee-b46f-a66203bfd67f',\n      address='10.152.183.95',\n      app_status=StatusInfo(current='waiting', message='awaiting for primary endpoint to be ready', since='14 Nov 2025 11:32:27Z'),\n      relations={\n        'database': [\n          AppStatusRelation(related_app='expressjs-k8s', interface='postgresql_client', scope='global'),\n        ],\n        'database-peers': [\n          AppStatusRelation(related_app='postgresql-k8s', interface='postgresql_peers', scope='global'),\n        ],\n        'restart': [\n          AppStatusRelation(related_app='postgresql-k8s', interface='rolling_op', scope='global'),\n        ],\n        'upgrade': [\n          AppStatusRelation(related_app='postgresql-k8s', interface='upgrade', scope='global'),\n        ],\n      },\n      units={\n        'postgresql-k8s/0': UnitStatus(\n          workload_status=StatusInfo(current='waiting', message='awaiting for primary endpoint to be ready', since='14 Nov 2025 11:32:27Z'),\n          juju_status=StatusInfo(current='idle', since='14 Nov 2025 11:32:49Z', version='3.6.11'),\n          leader=True,\n          address='10.1.50.140',\n          provider_id='postgresql-k8s-0',\n        ),\n      },\n      endpoint_bindings={\n        '': 'alpha',\n        'certificates': 'alpha',\n        'database': 'alpha',\n        'database-peers': 'alpha',\n        'db': 'alpha',\n        'db-admin': 'alpha',\n        'grafana-dashboard': 'alpha',\n        'ldap': 'alpha',\n        'logging': 'alpha',\n        'metrics-endpoint': 'alpha',\n        'receive-ca-cert': 'alpha',\n        'replication': 'alpha',\n        'replication-offer': 'alpha',\n        'restart': 'alpha',\n        's3-parameters': 'alpha',\n        'tracing': 'alpha',\n        'upgrade': 'alpha',\n      },\n    ),\n  },\n  storage=CombinedStorage(\n    storage={\n      'pgdata/0': StorageInfo(\n        kind='filesystem',\n        status=EntityStatus(current='attached', message='Successfully provisioned volume pvc-0e0eacf7-adee-4b96-8991-cb88fda90d7d', since='14 Nov 2025 11:31:50Z'),\n        persistent=False,\n        life='alive',\n        attachments=StorageAttachments(\n          units={\n            'postgresql-k8s/0': UnitStorageAttachment(life='alive'),\n          },\n        ),\n      ),\n    },\n    filesystems={\n      '0': FilesystemInfo(\n        size=1024,\n        provider_id='0e0eacf7-adee-4b96-8991-cb88fda90d7d',\n        volume='0',\n        storage='pgdata/0',\n        attachments=FilesystemAttachments(\n          containers={\n            'postgresql-k8s/0': FilesystemAttachment(mount_point='/var/lib/postgresql/data', read_only=False, life='alive'),\n          },\n          units={\n            'postgresql-k8s/0': UnitStorageAttachment(life='alive'),\n          },\n        ),\n        pool='kubernetes',\n        life='alive',\n        status=EntityStatus(current='attached', message='Successfully provisioned volume pvc-0e0eacf7-adee-4b96-8991-cb88fda90d7d', since='14 Nov 2025 11:31:50Z'),\n      ),\n    },\n    volumes={\n      '0': VolumeInfo(\n        size=1024,\n        persistent=True,\n        provider_id='pvc-0e0eacf7-adee-4b96-8991-cb88fda90d7d',\n        storage='pgdata/0',\n        attachments=VolumeAttachments(\n          containers={\n            'postgresql-k8s/0': VolumeAttachment(read_only=False, life='alive'),\n          },\n          units={\n            'postgresql-k8s/0': UnitStorageAttachment(life='alive'),\n          },\n        ),\n        pool='kubernetes',\n        life='alive',\n        status=EntityStatus(current='attached', since='14 Nov 2025 11:31:50Z'),\n      ),\n    },\n  ),\n  controller=ControllerStatus(timestamp='11:36:30Z'),\n)","time":{"start":1763119884430,"stop":1763119884430,"duration":0}},{"uid":"f749b88b71e1ce8b","reportUrl":"../1144//#testresult/f749b88b71e1ce8b","status":"passed","time":{"start":1763118766431,"stop":1763118766686,"duration":255}},{"uid":"df3e0a6cbf7650ae","reportUrl":"../1143//#testresult/df3e0a6cbf7650ae","status":"passed","time":{"start":1763118634700,"stop":1763118634928,"duration":228}},{"uid":"5037ed179cb45c84","reportUrl":"../1140//#testresult/5037ed179cb45c84","status":"passed","time":{"start":1762964378422,"stop":1762964378664,"duration":242}},{"uid":"3b9f1b10db470fa6","reportUrl":"../1139//#testresult/3b9f1b10db470fa6","status":"passed","time":{"start":1761902148028,"stop":1761902148325,"duration":297}},{"uid":"31768f9a3c0c0804","reportUrl":"../1137//#testresult/31768f9a3c0c0804","status":"passed","time":{"start":1761298211775,"stop":1761298212009,"duration":234}},{"uid":"46f169146849d5ca","reportUrl":"../1121//#testresult/46f169146849d5ca","status":"passed","time":{"start":1761047393138,"stop":1761047393419,"duration":281}},{"uid":"7c8d195f93007b0e","reportUrl":"../1120//#testresult/7c8d195f93007b0e","status":"passed","time":{"start":1761043336681,"stop":1761043336932,"duration":251}}]},"tags":[]},"source":"ae3c691a4bedb6ab.json","parameterValues":[]}