07:47:18 [32mINFO[0m cli: juju status --model testing --format json
07:47:18 [32mINFO[0m cli: juju bootstrap lxd localhost
07:48:54 [32mINFO[0m cli: juju switch github-pr-53d2d-microk8s:testing
07:48:55 [32mINFO[0m cli: juju status --model testing --format json
07:48:55 [32mINFO[0m cli: juju status --model testing --format json
07:48:55 [32mINFO[0m cli: juju switch localhost:
07:48:55 [32mINFO[0m cli: juju add-model --no-switch testing
07:48:56 [32mINFO[0m cli: juju switch github-pr-53d2d-microk8s:testing
07:48:56 [32mINFO[0m cli: juju status --model testing --format json
07:48:56 [32mINFO[0m cli: juju switch localhost:testing
07:48:56 [32mINFO[0m cli: juju status --model testing --format json
07:48:56 [32mINFO[0m cli: juju deploy --model testing squid-forward-proxy --channel edge --config hostname=proxy.example.com
07:48:58 [32mINFO[0m cli: juju offer squid-forward-proxy:http-proxy
07:48:59 [32mINFO[0m wait: status changed:
+ .model.name = 'testing'
+ .model.type = 'iaas'
+ .model.controller = 'localhost'
+ .model.cloud = 'localhost'
+ .model.version = '3.6.11'
+ .model.region = 'localhost'
+ .model.model_status.current = 'available'
+ .machines['0'].juju_status.current = 'pending'
+ .machines['0'].instance_id = 'pending'
+ .machines['0'].machine_status.current = 'pending'
+ .machines['0'].modification_status.current = 'idle'
+ .machines['0'].base.name = 'ubuntu'
+ .machines['0'].base.channel = '24.04'
+ .machines['0'].constraints = 'arch=amd64'
+ .apps['squid-forward-proxy'].charm = 'squid-forward-proxy'
+ .apps['squid-forward-proxy'].charm_origin = 'charmhub'
+ .apps['squid-forward-proxy'].charm_name = 'squid-forward-proxy'
+ .apps['squid-forward-proxy'].charm_rev = 31
+ .apps['squid-forward-proxy'].exposed = False
+ .apps['squid-forward-proxy'].base.name = 'ubuntu'
+ .apps['squid-forward-proxy'].base.channel = '24.04'
+ .apps['squid-forward-proxy'].charm_channel = 'latest/edge'
+ .apps['squid-forward-proxy'].app_status.current = 'waiting'
+ .apps['squid-forward-proxy'].app_status.message = 'waiting for machine'
+ .apps['squid-forward-proxy'].relations['squid-peer'][0].related_app = 'squid-forward-proxy'
+ .apps['squid-forward-proxy'].relations['squid-peer'][0].interface = 'squid_peer'
+ .apps['squid-forward-proxy'].relations['squid-peer'][0].scope = 'global'
+ .apps['squid-forward-proxy'].units['squid-forward-proxy/0'].workload_status.current = 'waiting'
+ .apps['squid-forward-proxy'].units['squid-forward-proxy/0'].workload_status.message = 'waiting for machine'
+ .apps['squid-forward-proxy'].units['squid-forward-proxy/0'].juju_status.current = 'allocating'
+ .apps['squid-forward-proxy'].units['squid-forward-proxy/0'].machine = '0'
+ .apps['squid-forward-proxy'].endpoint_bindings[''] = 'alpha'
+ .apps['squid-forward-proxy'].endpoint_bindings['cos-agent'] = 'alpha'
+ .apps['squid-forward-proxy'].endpoint_bindings['http-proxy'] = 'alpha'
+ .apps['squid-forward-proxy'].endpoint_bindings['squid-peer'] = 'alpha'
+ .offers['squid-forward-proxy'].app = 'squid-forward-proxy'
+ .offers['squid-forward-proxy'].endpoints['http-proxy'].interface = 'http_proxy'
+ .offers['squid-forward-proxy'].endpoints['http-proxy'].role = 'provider'
+ .offers['squid-forward-proxy'].charm = 'ch:amd64/squid-forward-proxy-31'
07:49:09 [32mINFO[0m wait: status changed:
- .machines['0'].instance_id = 'pending'
- .machines['0'].machine_status.current = 'pending'
- .machines['0'].modification_status.current = 'idle'
+ .machines['0'].instance_id = 'juju-b69439-0'
+ .machines['0'].machine_status.current = 'running'
+ .machines['0'].machine_status.message = 'Running'
+ .machines['0'].modification_status.current = 'applied'
+ .machines['0'].hardware = 'arch=amd64 cores=0 mem=0M availability-zone=runnervmfxdz0 virt-type=container'
07:49:20 [32mINFO[0m wait: status changed:
+ .machines['0'].dns_name = '10.253.204.2'
+ .machines['0'].ip_addresses[0] = '10.253.204.2'
+ .apps['squid-forward-proxy'].units['squid-forward-proxy/0'].public_address = '10.253.204.2'
07:49:50 [32mINFO[0m wait: status changed:
- .machines['0'].juju_status.current = 'pending'
+ .machines['0'].juju_status.current = 'started'
+ .machines['0'].juju_status.version = '3.6.11'
+ .machines['0'].hostname = 'juju-b69439-0'
+ .machines['0'].network_interfaces['eth0'].ip_addresses[0] = '10.253.204.2'
+ .machines['0'].network_interfaces['eth0'].mac_address = '00:16:3e:27:bc:ce'
+ .machines['0'].network_interfaces['eth0'].is_up = True
+ .machines['0'].network_interfaces['eth0'].gateway = '10.253.204.1'
+ .machines['0'].network_interfaces['eth0'].space = 'alpha'
- .apps['squid-forward-proxy'].app_status.current = 'waiting'
- .apps['squid-forward-proxy'].app_status.message = 'waiting for machine'
+ .apps['squid-forward-proxy'].app_status.current = 'maintenance'
+ .apps['squid-forward-proxy'].app_status.message = 'installing squid'
- .apps['squid-forward-proxy'].units['squid-forward-proxy/0'].workload_status.current = 'waiting'
- .apps['squid-forward-proxy'].units['squid-forward-proxy/0'].workload_status.message = 'waiting for machine'
- .apps['squid-forward-proxy'].units['squid-forward-proxy/0'].juju_status.current = 'allocating'
+ .apps['squid-forward-proxy'].units['squid-forward-proxy/0'].workload_status.current = 'maintenance'
+ .apps['squid-forward-proxy'].units['squid-forward-proxy/0'].workload_status.message = 'installing squid'
+ .apps['squid-forward-proxy'].units['squid-forward-proxy/0'].juju_status.current = 'executing'
+ .apps['squid-forward-proxy'].units['squid-forward-proxy/0'].juju_status.message = 'running install hook'
+ .apps['squid-forward-proxy'].units['squid-forward-proxy/0'].juju_status.version = '3.6.11'
+ .apps['squid-forward-proxy'].units['squid-forward-proxy/0'].leader = True
07:50:01 [32mINFO[0m wait: status changed:
- .apps['squid-forward-proxy'].app_status.current = 'maintenance'
- .apps['squid-forward-proxy'].app_status.message = 'installing squid'
+ .apps['squid-forward-proxy'].app_status.current = 'active'
+ .apps['squid-forward-proxy'].app_status.message = 'ready: 0'
- .apps['squid-forward-proxy'].units['squid-forward-proxy/0'].workload_status.current = 'maintenance'
- .apps['squid-forward-proxy'].units['squid-forward-proxy/0'].workload_status.message = 'installing squid'
+ .apps['squid-forward-proxy'].units['squid-forward-proxy/0'].workload_status.current = 'active'
+ .apps['squid-forward-proxy'].units['squid-forward-proxy/0'].workload_status.message = 'ready: 0'
- .apps['squid-forward-proxy'].units['squid-forward-proxy/0'].juju_status.message = 'running install hook'
+ .apps['squid-forward-proxy'].units['squid-forward-proxy/0'].juju_status.message = 'running squid-peer-relation-changed hook'
+ .apps['squid-forward-proxy'].units['squid-forward-proxy/0'].open_ports[0] = '3128/tcp'
07:50:11 [32mINFO[0m wait: status changed:
- .apps['squid-forward-proxy'].units['squid-forward-proxy/0'].juju_status.current = 'executing'
- .apps['squid-forward-proxy'].units['squid-forward-proxy/0'].juju_status.message = 'running squid-peer-relation-changed hook'
+ .apps['squid-forward-proxy'].units['squid-forward-proxy/0'].juju_status.current = 'idle'
07:50:21 [32mINFO[0m cli: juju switch github-pr-53d2d-microk8s:testing
07:50:21 [32mINFO[0m cli: juju consume localhost:admin/testing.squid-forward-proxy
07:50:22 [32mINFO[0m cli: juju status --model testing --format json
07:50:22 [32mINFO[0m cli: juju deploy --model testing http-proxy-configurator --channel latest/edge --config http-proxy-auth=none --config http-proxy-domains=www.example.com
07:50:24 [32mINFO[0m cli: juju integrate --model testing http-proxy-configurator squid-forward-proxy
07:50:24 [32mINFO[0m wait: status changed:
+ .model.name = 'testing'
+ .model.type = 'caas'
+ .model.controller = 'github-pr-53d2d-microk8s'
+ .model.cloud = 'microk8s'
+ .model.version = '3.6.11'
+ .model.region = 'localhost'
+ .model.model_status.current = 'available'
+ .apps['http-proxy-configurator'].charm = 'http-proxy-configurator'
+ .apps['http-proxy-configurator'].charm_origin = 'charmhub'
+ .apps['http-proxy-configurator'].charm_name = 'http-proxy-configurator'
+ .apps['http-proxy-configurator'].charm_rev = 6
+ .apps['http-proxy-configurator'].exposed = False
+ .apps['http-proxy-configurator'].base.name = 'ubuntu'
+ .apps['http-proxy-configurator'].base.channel = '24.04'
+ .apps['http-proxy-configurator'].charm_channel = 'latest/edge'
+ .apps['http-proxy-configurator'].scale = 1
+ .apps['http-proxy-configurator'].app_status.current = 'waiting'
+ .apps['http-proxy-configurator'].app_status.message = 'installing agent'
+ .apps['http-proxy-configurator'].relations['http-proxy'][0].related_app = 'squid-forward-proxy'
+ .apps['http-proxy-configurator'].relations['http-proxy'][0].interface = 'http_proxy'
+ .apps['http-proxy-configurator'].units['http-proxy-configurator/0'].workload_status.current = 'waiting'
+ .apps['http-proxy-configurator'].units['http-proxy-configurator/0'].workload_status.message = 'installing agent'
+ .apps['http-proxy-configurator'].units['http-proxy-configurator/0'].juju_status.current = 'allocating'
+ .apps['http-proxy-configurator'].endpoint_bindings[''] = 'alpha'
+ .apps['http-proxy-configurator'].endpoint_bindings['delegate-http-proxy'] = 'alpha'
+ .apps['http-proxy-configurator'].endpoint_bindings['http-proxy'] = 'alpha'
+ .app_endpoints['squid-forward-proxy'].url = 'localhost:admin/testing.squid-forward-proxy'
+ .app_endpoints['squid-forward-proxy'].endpoints['http-proxy'].interface = 'http_proxy'
+ .app_endpoints['squid-forward-proxy'].endpoints['http-proxy'].role = 'provider'
+ .app_endpoints['squid-forward-proxy'].app_status.current = 'active'
+ .app_endpoints['squid-forward-proxy'].app_status.message = 'ready: 0'
+ .app_endpoints['squid-forward-proxy'].relations['http-proxy'][0] = 'http-proxy-configurator'
07:50:35 [32mINFO[0m wait: status changed:
+ .apps['http-proxy-configurator'].provider_id = '547d590c-fb26-4be3-8d11-e19cf9a23f35'
+ .apps['http-proxy-configurator'].address = '10.152.183.79'
- .apps['http-proxy-configurator'].units['http-proxy-configurator/0'].workload_status.current = 'waiting'
- .apps['http-proxy-configurator'].units['http-proxy-configurator/0'].workload_status.message = 'installing agent'
- .apps['http-proxy-configurator'].units['http-proxy-configurator/0'].juju_status.current = 'allocating'
+ .apps['http-proxy-configurator'].units['http-proxy-configurator/0'].workload_status.current = 'active'
+ .apps['http-proxy-configurator'].units['http-proxy-configurator/0'].juju_status.current = 'executing'
+ .apps['http-proxy-configurator'].units['http-proxy-configurator/0'].juju_status.message = 'running start hook'
+ .apps['http-proxy-configurator'].units['http-proxy-configurator/0'].juju_status.version = '3.6.11'
+ .apps['http-proxy-configurator'].units['http-proxy-configurator/0'].leader = True
+ .apps['http-proxy-configurator'].units['http-proxy-configurator/0'].address = '10.1.126.10'
+ .apps['http-proxy-configurator'].units['http-proxy-configurator/0'].provider_id = 'http-proxy-configurator-0'
07:50:45 [32mINFO[0m wait: status changed:
- .apps['http-proxy-configurator'].app_status.current = 'waiting'
- .apps['http-proxy-configurator'].app_status.message = 'installing agent'
+ .apps['http-proxy-configurator'].app_status.current = 'active'
- .apps['http-proxy-configurator'].units['http-proxy-configurator/0'].juju_status.current = 'executing'
- .apps['http-proxy-configurator'].units['http-proxy-configurator/0'].juju_status.message = 'running start hook'
+ .apps['http-proxy-configurator'].units['http-proxy-configurator/0'].juju_status.current = 'idle'
- .app_endpoints['squid-forward-proxy'].app_status.message = 'ready: 0'
+ .app_endpoints['squid-forward-proxy'].app_status.message = 'ready: 1'
07:51:05 [32mINFO[0m cli: juju deploy --model testing /home/runner/work/paas-charm/paas-charm/flask-k8s_ubuntu-22.04-amd64.charm --resource flask-app-image=ghcr.io/canonical/test-flask:ac29e1faf47d5a93c86a5a026bb1906edc2b2fff-_0.1_amd64
07:51:09 [32mINFO[0m wait: status changed:
+ .model.name = 'testing'
+ .model.type = 'caas'
+ .model.controller = 'github-pr-53d2d-microk8s'
+ .model.cloud = 'microk8s'
+ .model.version = '3.6.11'
+ .model.region = 'localhost'
+ .model.model_status.current = 'available'
+ .apps['flask-k8s'].charm = 'local:flask-k8s-0'
+ .apps['flask-k8s'].charm_origin = 'local'
+ .apps['flask-k8s'].charm_name = 'flask-k8s'
+ .apps['flask-k8s'].charm_rev = 0
+ .apps['flask-k8s'].exposed = False
+ .apps['flask-k8s'].base.name = 'ubuntu'
+ .apps['flask-k8s'].base.channel = '22.04'
+ .apps['flask-k8s'].scale = 1
+ .apps['flask-k8s'].app_status.current = 'waiting'
+ .apps['flask-k8s'].app_status.message = 'installing agent'
+ .apps['flask-k8s'].relations['secret-storage'][0].related_app = 'flask-k8s'
+ .apps['flask-k8s'].relations['secret-storage'][0].interface = 'secret-storage'
+ .apps['flask-k8s'].relations['secret-storage'][0].scope = 'global'
+ .apps['flask-k8s'].units['flask-k8s/0'].workload_status.current = 'waiting'
+ .apps['flask-k8s'].units['flask-k8s/0'].workload_status.message = 'installing agent'
+ .apps['flask-k8s'].units['flask-k8s/0'].juju_status.current = 'allocating'
+ .apps['flask-k8s'].endpoint_bindings[''] = 'alpha'
+ .apps['flask-k8s'].endpoint_bindings['grafana-dashboard'] = 'alpha'
+ .apps['flask-k8s'].endpoint_bindings['http-proxy'] = 'alpha'
+ .apps['flask-k8s'].endpoint_bindings['ingress'] = 'alpha'
+ .apps['flask-k8s'].endpoint_bindings['logging'] = 'alpha'
+ .apps['flask-k8s'].endpoint_bindings['metrics-endpoint'] = 'alpha'
+ .apps['flask-k8s'].endpoint_bindings['mongodb'] = 'alpha'
+ .apps['flask-k8s'].endpoint_bindings['mysql'] = 'alpha'
+ .apps['flask-k8s'].endpoint_bindings['oidc'] = 'alpha'
+ .apps['flask-k8s'].endpoint_bindings['openfga'] = 'alpha'
+ .apps['flask-k8s'].endpoint_bindings['postgresql'] = 'alpha'
+ .apps['flask-k8s'].endpoint_bindings['rabbitmq'] = 'alpha'
+ .apps['flask-k8s'].endpoint_bindings['redis'] = 'alpha'
+ .apps['flask-k8s'].endpoint_bindings['s3'] = 'alpha'
+ .apps['flask-k8s'].endpoint_bindings['saml'] = 'alpha'
+ .apps['flask-k8s'].endpoint_bindings['secret-storage'] = 'alpha'
+ .apps['flask-k8s'].endpoint_bindings['smtp'] = 'alpha'
+ .apps['flask-k8s'].endpoint_bindings['tracing'] = 'alpha'
+ .apps['http-proxy-configurator'].charm = 'http-proxy-configurator'
+ .apps['http-proxy-configurator'].charm_origin = 'charmhub'
+ .apps['http-proxy-configurator'].charm_name = 'http-proxy-configurator'
+ .apps['http-proxy-configurator'].charm_rev = 6
+ .apps['http-proxy-configurator'].exposed = False
+ .apps['http-proxy-configurator'].base.name = 'ubuntu'
+ .apps['http-proxy-configurator'].base.channel = '24.04'
+ .apps['http-proxy-configurator'].charm_channel = 'latest/edge'
+ .apps['http-proxy-configurator'].scale = 1
+ .apps['http-proxy-configurator'].provider_id = '547d590c-fb26-4be3-8d11-e19cf9a23f35'
+ .apps['http-proxy-configurator'].address = '10.152.183.79'
+ .apps['http-proxy-configurator'].app_status.current = 'active'
+ .apps['http-proxy-configurator'].relations['http-proxy'][0].related_app = 'squid-forward-proxy'
+ .apps['http-proxy-configurator'].relations['http-proxy'][0].interface = 'http_proxy'
+ .apps['http-proxy-configurator'].units['http-proxy-configurator/0'].workload_status.current = 'active'
+ .apps['http-proxy-configurator'].units['http-proxy-configurator/0'].juju_status.current = 'idle'
+ .apps['http-proxy-configurator'].units['http-proxy-configurator/0'].juju_status.version = '3.6.11'
+ .apps['http-proxy-configurator'].units['http-proxy-configurator/0'].leader = True
+ .apps['http-proxy-configurator'].units['http-proxy-configurator/0'].address = '10.1.126.10'
+ .apps['http-proxy-configurator'].units['http-proxy-configurator/0'].provider_id = 'http-proxy-configurator-0'
+ .apps['http-proxy-configurator'].endpoint_bindings[''] = 'alpha'
+ .apps['http-proxy-configurator'].endpoint_bindings['delegate-http-proxy'] = 'alpha'
+ .apps['http-proxy-configurator'].endpoint_bindings['http-proxy'] = 'alpha'
+ .app_endpoints['squid-forward-proxy'].url = 'localhost:admin/testing.squid-forward-proxy'
+ .app_endpoints['squid-forward-proxy'].endpoints['http-proxy'].interface = 'http_proxy'
+ .app_endpoints['squid-forward-proxy'].endpoints['http-proxy'].role = 'provider'
+ .app_endpoints['squid-forward-proxy'].app_status.current = 'active'
+ .app_endpoints['squid-forward-proxy'].app_status.message = 'ready: 1'
+ .app_endpoints['squid-forward-proxy'].relations['http-proxy'][0] = 'http-proxy-configurator'
07:51:13 [32mINFO[0m wait: status changed:
+ .apps['flask-k8s'].provider_id = 'f667cbbf-b6b8-40da-8b64-5dc587233164'
+ .apps['flask-k8s'].address = '10.152.183.124'
07:51:15 [32mINFO[0m wait: status changed:
+ .apps['flask-k8s'].units['flask-k8s/0'].provider_id = 'flask-k8s-0'
07:51:18 [32mINFO[0m wait: status changed:
+ .apps['flask-k8s'].units['flask-k8s/0'].address = '10.1.126.11'
07:51:22 [32mINFO[0m wait: status changed:
- .apps['flask-k8s'].app_status.message = 'installing agent'
+ .apps['flask-k8s'].app_status.message = 'agent initialising'
- .apps['flask-k8s'].units['flask-k8s/0'].workload_status.message = 'installing agent'
+ .apps['flask-k8s'].units['flask-k8s/0'].workload_status.message = 'agent initialising'
+ .apps['flask-k8s'].units['flask-k8s/0'].juju_status.version = '3.6.11'
+ .apps['flask-k8s'].units['flask-k8s/0'].leader = True
07:51:23 [32mINFO[0m wait: status changed:
- .apps['flask-k8s'].app_status.current = 'waiting'
- .apps['flask-k8s'].app_status.message = 'agent initialising'
+ .apps['flask-k8s'].app_status.current = 'maintenance'
+ .apps['flask-k8s'].app_status.message = 'installing charm software'
- .apps['flask-k8s'].units['flask-k8s/0'].workload_status.current = 'waiting'
- .apps['flask-k8s'].units['flask-k8s/0'].workload_status.message = 'agent initialising'
- .apps['flask-k8s'].units['flask-k8s/0'].juju_status.current = 'allocating'
+ .apps['flask-k8s'].units['flask-k8s/0'].workload_status.current = 'maintenance'
+ .apps['flask-k8s'].units['flask-k8s/0'].workload_status.message = 'installing charm software'
+ .apps['flask-k8s'].units['flask-k8s/0'].juju_status.current = 'executing'
+ .apps['flask-k8s'].units['flask-k8s/0'].juju_status.message = 'running install hook'
07:51:26 [32mINFO[0m wait: status changed:
- .apps['flask-k8s'].units['flask-k8s/0'].juju_status.message = 'running install hook'
+ .apps['flask-k8s'].units['flask-k8s/0'].juju_status.message = 'running leader-elected hook'
07:51:27 [32mINFO[0m wait: status changed:
- .apps['flask-k8s'].app_status.current = 'maintenance'
- .apps['flask-k8s'].app_status.message = 'installing charm software'
+ .apps['flask-k8s'].app_status.current = 'waiting'
+ .apps['flask-k8s'].app_status.message = 'Waiting for pebble ready'
- .apps['flask-k8s'].units['flask-k8s/0'].workload_status.current = 'maintenance'
- .apps['flask-k8s'].units['flask-k8s/0'].workload_status.message = 'installing charm software'
+ .apps['flask-k8s'].units['flask-k8s/0'].workload_status.current = 'waiting'
+ .apps['flask-k8s'].units['flask-k8s/0'].workload_status.message = 'Waiting for pebble ready'
- .apps['flask-k8s'].units['flask-k8s/0'].juju_status.message = 'running leader-elected hook'
+ .apps['flask-k8s'].units['flask-k8s/0'].juju_status.message = 'running start hook'
07:51:28 [32mINFO[0m wait: status changed:
- .apps['flask-k8s'].units['flask-k8s/0'].juju_status.message = 'running start hook'
+ .apps['flask-k8s'].units['flask-k8s/0'].juju_status.message = 'running flask-app-pebble-ready hook'
07:51:29 [32mINFO[0m wait: status changed:
- .apps['flask-k8s'].app_status.current = 'waiting'
- .apps['flask-k8s'].app_status.message = 'Waiting for pebble ready'
+ .apps['flask-k8s'].app_status.current = 'maintenance'
+ .apps['flask-k8s'].app_status.message = 'Preparing service for restart'
- .apps['flask-k8s'].units['flask-k8s/0'].workload_status.current = 'waiting'
- .apps['flask-k8s'].units['flask-k8s/0'].workload_status.message = 'Waiting for pebble ready'
- .apps['flask-k8s'].units['flask-k8s/0'].juju_status.current = 'executing'
- .apps['flask-k8s'].units['flask-k8s/0'].juju_status.message = 'running flask-app-pebble-ready hook'
+ .apps['flask-k8s'].units['flask-k8s/0'].workload_status.current = 'maintenance'
+ .apps['flask-k8s'].units['flask-k8s/0'].workload_status.message = 'Preparing service for restart'
+ .apps['flask-k8s'].units['flask-k8s/0'].juju_status.current = 'idle'
07:51:31 [32mINFO[0m wait: status changed:
- .apps['flask-k8s'].app_status.current = 'maintenance'
- .apps['flask-k8s'].app_status.message = 'Preparing service for restart'
+ .apps['flask-k8s'].app_status.current = 'waiting'
+ .apps['flask-k8s'].app_status.message = 'installing agent'
- .apps['flask-k8s'].units['flask-k8s/0'].workload_status.current = 'maintenance'
- .apps['flask-k8s'].units['flask-k8s/0'].workload_status.message = 'Preparing service for restart'
+ .apps['flask-k8s'].units['flask-k8s/0'].workload_status.current = 'active'
07:51:32 [32mINFO[0m wait: status changed:
- .apps['flask-k8s'].app_status.current = 'waiting'
- .apps['flask-k8s'].app_status.message = 'installing agent'
+ .apps['flask-k8s'].app_status.current = 'maintenance'
+ .apps['flask-k8s'].app_status.message = 'Preparing service for restart'
- .apps['flask-k8s'].units['flask-k8s/0'].workload_status.current = 'active'
+ .apps['flask-k8s'].units['flask-k8s/0'].workload_status.current = 'maintenance'
+ .apps['flask-k8s'].units['flask-k8s/0'].workload_status.message = 'Preparing service for restart'
07:51:33 [32mINFO[0m wait: status changed:
- .apps['flask-k8s'].app_status.current = 'maintenance'
- .apps['flask-k8s'].app_status.message = 'Preparing service for restart'
+ .apps['flask-k8s'].app_status.current = 'waiting'
+ .apps['flask-k8s'].app_status.message = 'installing agent'
- .apps['flask-k8s'].units['flask-k8s/0'].workload_status.current = 'maintenance'
- .apps['flask-k8s'].units['flask-k8s/0'].workload_status.message = 'Preparing service for restart'
+ .apps['flask-k8s'].units['flask-k8s/0'].workload_status.current = 'active'
07:51:43 [32mINFO[0m wait: status changed:
- .apps['flask-k8s'].app_status.current = 'waiting'
- .apps['flask-k8s'].app_status.message = 'installing agent'
+ .apps['flask-k8s'].app_status.current = 'active'
07:51:45 [32mINFO[0m cli: juju integrate --model testing flask-k8s http-proxy-configurator
07:51:46 [32mINFO[0m wait: status changed:
+ .model.name = 'testing'
+ .model.type = 'caas'
+ .model.controller = 'github-pr-53d2d-microk8s'
+ .model.cloud = 'microk8s'
+ .model.version = '3.6.11'
+ .model.region = 'localhost'
+ .model.model_status.current = 'available'
+ .apps['flask-k8s'].charm = 'local:flask-k8s-0'
+ .apps['flask-k8s'].charm_origin = 'local'
+ .apps['flask-k8s'].charm_name = 'flask-k8s'
+ .apps['flask-k8s'].charm_rev = 0
+ .apps['flask-k8s'].exposed = False
+ .apps['flask-k8s'].base.name = 'ubuntu'
+ .apps['flask-k8s'].base.channel = '22.04'
+ .apps['flask-k8s'].scale = 1
+ .apps['flask-k8s'].provider_id = 'f667cbbf-b6b8-40da-8b64-5dc587233164'
+ .apps['flask-k8s'].address = '10.152.183.124'
+ .apps['flask-k8s'].app_status.current = 'active'
+ .apps['flask-k8s'].relations['http-proxy'][0].related_app = 'http-proxy-configurator'
+ .apps['flask-k8s'].relations['http-proxy'][0].interface = 'http_proxy'
+ .apps['flask-k8s'].relations['http-proxy'][0].scope = 'global'
+ .apps['flask-k8s'].relations['secret-storage'][0].related_app = 'flask-k8s'
+ .apps['flask-k8s'].relations['secret-storage'][0].interface = 'secret-storage'
+ .apps['flask-k8s'].relations['secret-storage'][0].scope = 'global'
+ .apps['flask-k8s'].units['flask-k8s/0'].workload_status.current = 'active'
+ .apps['flask-k8s'].units['flask-k8s/0'].juju_status.current = 'executing'
+ .apps['flask-k8s'].units['flask-k8s/0'].juju_status.message = 'running http-proxy-relation-created hook'
+ .apps['flask-k8s'].units['flask-k8s/0'].juju_status.version = '3.6.11'
+ .apps['flask-k8s'].units['flask-k8s/0'].leader = True
+ .apps['flask-k8s'].units['flask-k8s/0'].address = '10.1.126.11'
+ .apps['flask-k8s'].units['flask-k8s/0'].provider_id = 'flask-k8s-0'
+ .apps['flask-k8s'].endpoint_bindings[''] = 'alpha'
+ .apps['flask-k8s'].endpoint_bindings['grafana-dashboard'] = 'alpha'
+ .apps['flask-k8s'].endpoint_bindings['http-proxy'] = 'alpha'
+ .apps['flask-k8s'].endpoint_bindings['ingress'] = 'alpha'
+ .apps['flask-k8s'].endpoint_bindings['logging'] = 'alpha'
+ .apps['flask-k8s'].endpoint_bindings['metrics-endpoint'] = 'alpha'
+ .apps['flask-k8s'].endpoint_bindings['mongodb'] = 'alpha'
+ .apps['flask-k8s'].endpoint_bindings['mysql'] = 'alpha'
+ .apps['flask-k8s'].endpoint_bindings['oidc'] = 'alpha'
+ .apps['flask-k8s'].endpoint_bindings['openfga'] = 'alpha'
+ .apps['flask-k8s'].endpoint_bindings['postgresql'] = 'alpha'
+ .apps['flask-k8s'].endpoint_bindings['rabbitmq'] = 'alpha'
+ .apps['flask-k8s'].endpoint_bindings['redis'] = 'alpha'
+ .apps['flask-k8s'].endpoint_bindings['s3'] = 'alpha'
+ .apps['flask-k8s'].endpoint_bindings['saml'] = 'alpha'
+ .apps['flask-k8s'].endpoint_bindings['secret-storage'] = 'alpha'
+ .apps['flask-k8s'].endpoint_bindings['smtp'] = 'alpha'
+ .apps['flask-k8s'].endpoint_bindings['tracing'] = 'alpha'
+ .apps['http-proxy-configurator'].charm = 'http-proxy-configurator'
+ .apps['http-proxy-configurator'].charm_origin = 'charmhub'
+ .apps['http-proxy-configurator'].charm_name = 'http-proxy-configurator'
+ .apps['http-proxy-configurator'].charm_rev = 6
+ .apps['http-proxy-configurator'].exposed = False
+ .apps['http-proxy-configurator'].base.name = 'ubuntu'
+ .apps['http-proxy-configurator'].base.channel = '24.04'
+ .apps['http-proxy-configurator'].charm_channel = 'latest/edge'
+ .apps['http-proxy-configurator'].scale = 1
+ .apps['http-proxy-configurator'].provider_id = '547d590c-fb26-4be3-8d11-e19cf9a23f35'
+ .apps['http-proxy-configurator'].address = '10.152.183.79'
+ .apps['http-proxy-configurator'].app_status.current = 'active'
+ .apps['http-proxy-configurator'].relations['delegate-http-proxy'][0].related_app = 'flask-k8s'
+ .apps['http-proxy-configurator'].relations['delegate-http-proxy'][0].interface = 'http_proxy'
+ .apps['http-proxy-configurator'].relations['delegate-http-proxy'][0].scope = 'global'
+ .apps['http-proxy-configurator'].relations['http-proxy'][0].related_app = 'squid-forward-proxy'
+ .apps['http-proxy-configurator'].relations['http-proxy'][0].interface = 'http_proxy'
+ .apps['http-proxy-configurator'].units['http-proxy-configurator/0'].workload_status.current = 'active'
+ .apps['http-proxy-configurator'].units['http-proxy-configurator/0'].juju_status.current = 'executing'
+ .apps['http-proxy-configurator'].units['http-proxy-configurator/0'].juju_status.message = 'running delegate-http-proxy-relation-created hook'
+ .apps['http-proxy-configurator'].units['http-proxy-configurator/0'].juju_status.version = '3.6.11'
+ .apps['http-proxy-configurator'].units['http-proxy-configurator/0'].leader = True
+ .apps['http-proxy-configurator'].units['http-proxy-configurator/0'].address = '10.1.126.10'
+ .apps['http-proxy-configurator'].units['http-proxy-configurator/0'].provider_id = 'http-proxy-configurator-0'
+ .apps['http-proxy-configurator'].endpoint_bindings[''] = 'alpha'
+ .apps['http-proxy-configurator'].endpoint_bindings['delegate-http-proxy'] = 'alpha'
+ .apps['http-proxy-configurator'].endpoint_bindings['http-proxy'] = 'alpha'
+ .app_endpoints['squid-forward-proxy'].url = 'localhost:admin/testing.squid-forward-proxy'
+ .app_endpoints['squid-forward-proxy'].endpoints['http-proxy'].interface = 'http_proxy'
+ .app_endpoints['squid-forward-proxy'].endpoints['http-proxy'].role = 'provider'
+ .app_endpoints['squid-forward-proxy'].app_status.current = 'active'
+ .app_endpoints['squid-forward-proxy'].app_status.message = 'ready: 1'
+ .app_endpoints['squid-forward-proxy'].relations['http-proxy'][0] = 'http-proxy-configurator'
07:51:56 [32mINFO[0m wait: status changed:
- .apps['flask-k8s'].app_status.current = 'active'
+ .apps['flask-k8s'].app_status.current = 'waiting'
+ .apps['flask-k8s'].app_status.message = 'installing agent'
- .apps['flask-k8s'].units['flask-k8s/0'].juju_status.message = 'running http-proxy-relation-created hook'
+ .apps['flask-k8s'].units['flask-k8s/0'].juju_status.message = 'running http-proxy-relation-changed hook'
- .apps['http-proxy-configurator'].units['http-proxy-configurator/0'].juju_status.current = 'executing'
- .apps['http-proxy-configurator'].units['http-proxy-configurator/0'].juju_status.message = 'running delegate-http-proxy-relation-created hook'
+ .apps['http-proxy-configurator'].units['http-proxy-configurator/0'].juju_status.current = 'idle'
07:52:07 [32mINFO[0m wait: status changed:
- .apps['flask-k8s'].app_status.current = 'waiting'
- .apps['flask-k8s'].app_status.message = 'installing agent'
+ .apps['flask-k8s'].app_status.current = 'active'
- .apps['flask-k8s'].units['flask-k8s/0'].juju_status.current = 'executing'
- .apps['flask-k8s'].units['flask-k8s/0'].juju_status.message = 'running http-proxy-relation-changed hook'
+ .apps['flask-k8s'].units['flask-k8s/0'].juju_status.current = 'idle'
07:52:27 [32mINFO[0m cli: juju status --model testing --format json
07:52:27 [32mINFO[0m cli: juju remove-relation --model testing flask-k8s http-proxy-configurator