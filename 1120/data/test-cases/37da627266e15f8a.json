{"uid":"37da627266e15f8a","name":"test_workers_and_scheduler_services[3]","fullName":"tests.integration.flask.test_workers#test_workers_and_scheduler_services","historyId":"5bef2b7b43a47770dfc383d57a3187b2","time":{"start":1761043476163,"stop":1761043549655,"duration":73492},"description":"\n    arrange: Flask and redis deployed and integrated.\n    act: Scale the app to the desired number of units.\n    assert: There should be only one scheduler and as many workers as units. That will\n            be checked because the scheduler is constantly sending tasks with its hostname\n            to the workers, and the workers will put its own hostname and the schedulers\n            hostname in Redis sets. Those sets are checked through the Flask app,\n            that queries Redis.\n    ","descriptionHtml":"<pre><code>arrange: Flask and redis deployed and integrated.\nact: Scale the app to the desired number of units.\nassert: There should be only one scheduler and as many workers as units. That will\n        be checked because the scheduler is constantly sending tasks with its hostname\n        to the workers, and the workers will put its own hostname and the schedulers\n        hostname in Redis sets. Those sets are checked through the Flask app,\n        that queries Redis.\n</code></pre>\n","status":"passed","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":1,"retriesStatusChange":true,"beforeStages":[{"name":"tmp_path_factory","time":{"start":1761043175933,"stop":1761043175933,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"pytestconfig","time":{"start":1761043175933,"stop":1761043175933,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"ops_test","time":{"start":1761043304032,"stop":1761043304336,"duration":304},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop","time":{"start":1761043304032,"stop":1761043304032,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"model","time":{"start":1761043304336,"stop":1761043304336,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"charm_file","time":{"start":1761043304336,"stop":1761043304360,"duration":24},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"build_charm","time":{"start":1761043304360,"stop":1761043305684,"duration":1324},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"flask_app","time":{"start":1761043305684,"stop":1761043344410,"duration":38726},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"test_flask_image","time":{"start":1761043305684,"stop":1761043305684,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"redis_k8s_app","time":{"start":1761043344411,"stop":1761043386915,"duration":42504},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"get_unit_ips","time":{"start":1761043344411,"stop":1761043344411,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"abort_on_fail","time":{"start":1761043457360,"stop":1761043457360,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"cwd","time":{"start":1761043457360,"stop":1761043457360,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"integrate_redis_k8s_flask","time":{"start":1761043457360,"stop":1761043476162,"duration":18802},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"description":"\n    arrange: Flask and redis deployed and integrated.\n    act: Scale the app to the desired number of units.\n    assert: There should be only one scheduler and as many workers as units. That will\n            be checked because the scheduler is constantly sending tasks with its hostname\n            to the workers, and the workers will put its own hostname and the schedulers\n            hostname in Redis sets. Those sets are checked through the Flask app,\n            that queries Redis.\n    ","status":"passed","steps":[],"attachments":[{"uid":"7bcaf0e176e31993","name":"log","source":"7bcaf0e176e31993.txt","type":"text/plain","size":3819}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"integrate_redis_k8s_flask::finalizer","time":{"start":1761043549655,"stop":1761043575430,"duration":25775},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"abort_on_fail::0","time":{"start":1761043575431,"stop":1761043575431,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"ops_test::finalizer","time":{"start":1761043632643,"stop":1761043633083,"duration":440},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::2","time":{"start":1761043633084,"stop":1761043633084,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::_close_event_loop","time":{"start":1761043633084,"stop":1761043633084,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::_provide_clean_event_loop","time":{"start":1761043633084,"stop":1761043633084,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"tag","value":"asyncio"},{"name":"parentSuite","value":"tests.integration.flask"},{"name":"suite","value":"test_workers"},{"name":"host","value":"runnervmnfq8z"},{"name":"thread","value":"30918-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.integration.flask.test_workers"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"num_units","value":"3"}],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[{"uid":"26c589651200ec17","status":"unknown","time":{}}],"categories":[],"tags":["asyncio"]},"source":"37da627266e15f8a.json","parameterValues":["3"]}